var mapboxsearch=(()=>{var Ss=Object.create;var Tt=Object.defineProperty,Ts=Object.defineProperties,ws=Object.getOwnPropertyDescriptor,Ls=Object.getOwnPropertyDescriptors,Cs=Object.getOwnPropertyNames,ai=Object.getOwnPropertySymbols,ks=Object.getPrototypeOf,Xi=Object.prototype.hasOwnProperty,Dn=Object.prototype.propertyIsEnumerable;var Nn=(t,e,r)=>e in t?Tt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x=(t,e)=>{for(var r in e||(e={}))Xi.call(e,r)&&Nn(t,r,e[r]);if(ai)for(var r of ai(e))Dn.call(e,r)&&Nn(t,r,e[r]);return t},G=(t,e)=>Ts(t,Ls(e)),jn=t=>Tt(t,"__esModule",{value:!0});var Un=(t,e)=>{var r={};for(var i in t)Xi.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&ai)for(var i of ai(t))e.indexOf(i)<0&&Dn.call(t,i)&&(r[i]=t[i]);return r};var $n=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Rs=(t,e)=>{for(var r in e)Tt(t,r,{get:e[r],enumerable:!0})},Gn=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Cs(e))!Xi.call(t,o)&&(r||o!=="default")&&Tt(t,o,{get:()=>e[o],enumerable:!(i=ws(e,o))||i.enumerable});return t},Yn=(t,e)=>Gn(jn(Tt(t!=null?Ss(ks(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Is=(t=>(e,r)=>t&&t.get(e)||(r=Gn(jn({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var zi=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var n=(t,e,r)=>(zi(t,e,"read from private field"),r?r.call(t):e.get(t)),d=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},p=(t,e,r,i)=>(zi(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var li=(t,e,r)=>(zi(t,e,"access private method"),r);var F=(t,e,r)=>new Promise((i,o)=>{var s=c=>{try{a(r.next(c))}catch(u){o(u)}},l=c=>{try{a(r.throw(c))}catch(u){o(u)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,l);a((r=r.apply(t,e)).next())});var Jo=$n((Zo,Ri)=>{(function(t){var e=!1,r,i;function o(){if(typeof r!="undefined")return r;var h=document.documentElement,f=document.createElement("div");return f.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),h.appendChild(f),r=f.offsetWidth-f.clientWidth,h.removeChild(f),r}function s(){return document.documentElement.scrollHeight>window.innerHeight}function l(h){if(!(typeof document=="undefined"||e)){var f=document.documentElement;i=window.pageYOffset,s()?f.style.width="calc(100% - "+o()+"px)":f.style.width="100%",f.style.position="fixed",f.style.top=-i+"px",f.style.overflow="hidden",e=!0}}function a(){if(!(typeof document=="undefined"||!e)){var h=document.documentElement;h.style.width="",h.style.position="",h.style.top="",h.style.overflow="",window.scroll(0,i),e=!1}}function c(){if(e){a();return}l()}var u={on:l,off:a,toggle:c};typeof Ri!="undefined"&&typeof Ri.exports!="undefined"?Ri.exports=u:t.noScroll=u})(Zo)});var fs=$n((On,Pn)=>{var al=function(){var t={},e=1e-10,r=Math.PI/180,i=180/Math.PI,o=6378137,s=20037508342789244e-9;function l(c){return Number(c)===c&&c%1!==0}function a(c){if(c=c||{},this.size=c.size||256,this.expansion=c.antimeridian===!0?2:1,!t[this.size]){var u=this.size,h=t[this.size]={};h.Bc=[],h.Cc=[],h.zc=[],h.Ac=[];for(var f=0;f<30;f++)h.Bc.push(u/360),h.Cc.push(u/(2*Math.PI)),h.zc.push(u/2),h.Ac.push(u),u*=2}this.Bc=t[this.size].Bc,this.Cc=t[this.size].Cc,this.zc=t[this.size].zc,this.Ac=t[this.size].Ac}return a.prototype.px=function(c,u){if(l(u)){var h=this.size*Math.pow(2,u),f=h/2,b=h/360,E=h/(2*Math.PI),v=h,y=Math.min(Math.max(Math.sin(r*c[1]),-.9999),.9999),M=f+c[0]*b,T=f+.5*Math.log((1+y)/(1-y))*-E;return M>v*this.expansion&&(M=v*this.expansion),T>v&&(T=v),[M,T]}else{var f=this.zc[u],y=Math.min(Math.max(Math.sin(r*c[1]),-.9999),.9999),M=Math.round(f+c[0]*this.Bc[u]),T=Math.round(f+.5*Math.log((1+y)/(1-y))*-this.Cc[u]);return M>this.Ac[u]*this.expansion&&(M=this.Ac[u]*this.expansion),T>this.Ac[u]&&(T=this.Ac[u]),[M,T]}},a.prototype.ll=function(c,u){if(l(u)){var h=this.size*Math.pow(2,u),f=h/360,b=h/(2*Math.PI),E=h/2,v=(c[1]-E)/-b,y=(c[0]-E)/f,M=i*(2*Math.atan(Math.exp(v))-.5*Math.PI);return[y,M]}else{var v=(c[1]-this.zc[u])/-this.Cc[u],y=(c[0]-this.zc[u])/this.Bc[u],M=i*(2*Math.atan(Math.exp(v))-.5*Math.PI);return[y,M]}},a.prototype.bbox=function(c,u,h,f,b){f&&(u=Math.pow(2,h)-1-u);var E=[c*this.size,(+u+1)*this.size],v=[(+c+1)*this.size,u*this.size],y=this.ll(E,h).concat(this.ll(v,h));return b==="900913"?this.convert(y,"900913"):y},a.prototype.xyz=function(c,u,h,f){f==="900913"&&(c=this.convert(c,"WGS84"));var b=[c[0],c[1]],E=[c[2],c[3]],v=this.px(b,u),y=this.px(E,u),M=[Math.floor(v[0]/this.size),Math.floor((y[0]-1)/this.size)],T=[Math.floor(y[1]/this.size),Math.floor((v[1]-1)/this.size)],j={minX:Math.min.apply(Math,M)<0?0:Math.min.apply(Math,M),minY:Math.min.apply(Math,T)<0?0:Math.min.apply(Math,T),maxX:Math.max.apply(Math,M),maxY:Math.max.apply(Math,T)};if(h){var O={minY:Math.pow(2,u)-1-j.maxY,maxY:Math.pow(2,u)-1-j.minY};j.minY=O.minY,j.maxY=O.maxY}return j},a.prototype.convert=function(c,u){return u==="900913"?this.forward(c.slice(0,2)).concat(this.forward(c.slice(2,4))):this.inverse(c.slice(0,2)).concat(this.inverse(c.slice(2,4)))},a.prototype.forward=function(c){var u=[o*c[0]*r,o*Math.log(Math.tan(Math.PI*.25+.5*c[1]*r))];return u[0]>s&&(u[0]=s),u[0]<-s&&(u[0]=-s),u[1]>s&&(u[1]=s),u[1]<-s&&(u[1]=-s),u},a.prototype.inverse=function(c){return[c[0]*i/o,(Math.PI*.5-2*Math.atan(Math.exp(-c[1]/o)))*i]},a}();typeof Pn!="undefined"&&typeof On!="undefined"&&(Pn.exports=On=al)});var pl={};Rs(pl,{MapboxAddressAutofill:()=>ht,MapboxAddressConfirmation:()=>$e,MapboxAddressMinimap:()=>bt,MapboxHTMLEvent:()=>S,MapboxSearchBox:()=>pt,autofill:()=>As,config:()=>I,confirmAddress:()=>Pi,getAutofillSearchText:()=>lt,getFormAutofillValues:()=>Li});var Wn=document.implementation.createHTMLDocument();function se(t,e){let r={};for(let[i,o]of Object.entries(e))r[i]=t.querySelector(o);return r}function qn(t){return Array.from(t.childNodes||[]).filter(e=>e.nodeType===Node.ELEMENT_NODE)}function N(t){let e=document.createElement("template");return e.innerHTML=t,e.content.firstElementChild}function Vn(t){let e=Wn.createElement("style");return e.textContent=t,Wn.head.appendChild(e),e.sheet}function Xn(t){return window.getComputedStyle(t).display!=="none"}function ae(t,e){if(!t)return;Object.getOwnPropertyDescriptor(t.constructor.prototype,"value").set.call(t,e);let i=t;i._valueTracker&&i._valueTracker.setValue("");let o=new Event("input",{bubbles:!0});o.simulated=!0,t.dispatchEvent(o);let s=new Event("change",{bubbles:!0});s.simulated=!0,t.dispatchEvent(s)}function ci(t,e=!1){let r,i,o=t.getBoundingClientRect();if(t.style.display==="none"||o.height===0&&o.width===0){let s=t.cloneNode(e);t.parentElement.appendChild(s),s.style.setProperty("display","block","important");let l=s.getBoundingClientRect();r=l.width,i=l.height,s.style.setProperty("display","none"),s.remove()}else r=o.width,i=o.height;return{height:Math.floor(i),width:Math.floor(r)}}function zn(t){let e=document.createElement("style");e.innerHTML=t,document.head.appendChild(e)}var Os=new RegExp("[_a-zA-Z]+[_a-zA-Z0-9-]*","g"),Ps=new RegExp(`\\.${Os.source}`,"g"),Bs=new RegExp("^\\s*(@(?:media|supports)[^{]*){(.*)}\\s*$");function wt(t,e){return t.replace(Ps,r=>"."+e(r.slice(1)))}function Ki(t,e){let i=Vn(t).cssRules;function o(l){if(l instanceof CSSStyleRule)return`${wt(l.selectorText,e)} { ${l.style.cssText} }`;let a=Bs.exec(l.cssText.split(`
`).join(""));if(a&&a.length>2){let c=a[1],u=a[2];return`${c} { ${Ki(u,e)} }`}return l.cssText}let s="";for(let l of Array.from(i))s+=o(l)+`

`;return s.trim()}function Qi(t,e){let r=Array.from(t.querySelectorAll("[class]"));r.push(t);for(let i of r){let{classList:o}=i;for(let s of Array.from(o))o.remove(s),o.add(e(s))}return t}var Hs=Object.defineProperty,_s=Object.defineProperties,Fs=Object.getOwnPropertyDescriptors,hi=Object.getOwnPropertySymbols,Zn=Object.prototype.hasOwnProperty,Jn=Object.prototype.propertyIsEnumerable,Kn=(t,e,r)=>e in t?Hs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,H=(t,e)=>{for(var r in e||(e={}))Zn.call(e,r)&&Kn(t,r,e[r]);if(hi)for(var r of hi(e))Jn.call(e,r)&&Kn(t,r,e[r]);return t},Qe=(t,e)=>_s(t,Fs(e)),rn=(t,e)=>{var r={};for(var i in t)Zn.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&hi)for(var i of hi(t))e.indexOf(i)<0&&Jn.call(t,i)&&(r[i]=t[i]);return r},nn=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},le=(t,e,r)=>(nn(t,e,"read from private field"),r?r.call(t):e.get(t)),Be=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Lt=(t,e,r,i)=>(nn(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),pi=(t,e,r)=>(nn(t,e,"access private method"),r),ce=(t,e,r)=>new Promise((i,o)=>{var s=c=>{try{a(r.next(c))}catch(u){o(u)}},l=c=>{try{a(r.throw(c))}catch(u){o(u)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,l);a((r=r.apply(t,e)).next())}),eo="https://api.mapbox.com/autofill/v1",Ns="suggest",Ds="retrieve",js=`${eo}/${Ns}`,Us=`${eo}/${Ds}`,_=class{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90");if(this.lng>180||this.lng<-180)throw new Error("Invalid LngLat longitude value: must be between -180 and 180")}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}static convert(t){if(t instanceof _)return new _(t.lng,t.lat);if(Array.isArray(t)&&t.length===2)return new _(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null&&("lng"in t||"lon"in t)&&"lat"in t)return new _(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}},de=class{constructor(t,e){this._sw=_.convert(t),this._ne=_.convert(e)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new _(this.getWest(),this.getNorth())}getSouthEast(){return new _(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toFlatArray(){return[this._sw.lng,this._sw.lat,this._ne.lng,this._ne.lat]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}static convert(t){if(!t)throw new Error("Invalid LngLatBounds convert value: falsy");if(t instanceof de)return new de(t.getSouthWest(),t.getNorthEast());if(Array.isArray(t)&&t.length===2)return new de(_.convert(t[0]),_.convert(t[1]));if(Array.isArray(t)&&t.length===4)return new de(_.convert([t[0],t[1]]),_.convert([t[2],t[3]]));throw new Error("`LngLatBoundsLike` argument must be specified as an array [<LngLatLike>, <LngLatLike>] or an array [<west>, <south>, <east>, <north>]")}};function $s(){let e=(Math.random().toString(16)+Date.now().toString(16)+Math.random().toString(16)).replace(/\./g,"");return[e.slice(0,8),e.slice(8,12),"4"+e.slice(12,15)+"-8"+e.slice(15,18),e.slice(18,30)].join("-")}var J=class{constructor(t){this.id=t!=null?t:$s()}toString(){return this.id}static convert(t){return new J(t instanceof J?t.id:t.toString())}},Gs="Unknown error",Ys=class extends Error{constructor(t,e){super(String(t.message||t.error||Gs));this.name="MapboxError",this.statusCode=e}toString(){return`${this.name} (${this.statusCode}): ${this.message}`}};function Pe(t){return ce(this,null,function*(){if(!t.ok){let e=yield t.json();throw new Ys(e,t.status)}})}var Qn=globalThis.fetch,Ws=globalThis.AbortController;function Le(){if(!Qn)throw new Error("Fetch implementation not found. Please include a fetch polyfill in your application or use `polyfillFetch` from `@mapbox/search-js-core` to fix this issue.");return{fetch:Qn,AbortController:Ws}}function He(...t){let e=[];for(let r of t){if(!r)continue;let i=Object.entries(r);for(let[o,s]of i)s!=null&&e.push(`${o}=${encodeURIComponent(String(s))}`)}return e.join("&")}var Ji,to,ro=class{constructor(t={}){Be(this,Ji);let e=t,{accessToken:r}=e,i=rn(e,["accessToken"]);this.accessToken=r,this.defaults=H(H({},ro.defaults),i)}suggest(t,e){return ce(this,null,function*(){if(!t)throw new Error("searchText is required");let{sessionToken:r,signal:i}=e,o=Qe(H(H({},this.defaults),e),{sessionToken:r}),s=new URL(`${js}/${encodeURIComponent(t)}`);s.search=pi(this,Ji,to).call(this,o);let{fetch:l}=Le(),a=yield l(s.toString(),{signal:i});yield Pe(a);let c=yield a.json();return Qe(H({},c),{suggestions:c.suggestions.map(u=>Qe(H({},u),{original_search_text:t})),url:s.toString()})})}retrieve(t,e){return ce(this,null,function*(){if(!t)throw new Error("suggestion is required");if(!this.canRetrieve(t))throw new Error("suggestion cannot be retrieved");let{sessionToken:r,signal:i}=e,o=J.convert(r),s=new URL(`${Us}/${t.action.id}`);s.search=He({access_token:this.accessToken,session_token:o.id});let{fetch:l}=Le(),a=yield l(s.toString(),{signal:i});yield Pe(a);let c=yield a.json();return c.url=s.toString(),c})}canRetrieve(t){let e=t.action;return typeof(e==null?void 0:e.id)=="string"}},kt=ro;Ji=new WeakSet;to=function(t){return He({types:"address",streets:!0,access_token:this.accessToken,language:t.language,country:t.country,limit:t.limit},t.sessionToken&&{session_token:J.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:_.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:de.convert(t.bbox).toFlatArray().join(",")})};kt.defaults={language:"en",proximity:"ip"};var fi="https://api.mapbox.com/search/searchbox/v1",qs="suggest",Vs="retrieve",Xs="category",zs="reverse",Ks=`${fi}/${qs}`,Qs=`${fi}/${Vs}`,Zs=`${fi}/${Xs}`,Js=`${fi}/${zs}`,di,en,io=class{constructor(t={}){Be(this,di);let e=t,{accessToken:r}=e,i=rn(e,["accessToken"]);this.accessToken=r,this.defaults=H(H({},io.defaults),i)}suggest(t,e){return ce(this,null,function*(){if(!t)throw new Error("searchText is required");let{sessionToken:r,signal:i}=e,o=Qe(H(H({},this.defaults),e),{q:t,sessionToken:r});if(o.eta_type&&(!o.origin||!o.navigation_profile))throw new Error("to provide eta estimate: eta, navigation_profile, and origin are required");if(o.origin&&!o.navigation_profile)throw new Error("to provide distance estimate: both navigation_profile and origin are required");let s=new URL(Ks);s.search=pi(this,di,en).call(this,o);let{fetch:l}=Le(),a=yield l(s.toString(),{signal:i});yield Pe(a);let c=yield a.json();return c.url=s.toString(),c})}retrieve(t,e){return ce(this,null,function*(){if(!t)throw new Error("suggestion is required");let{sessionToken:r,signal:i}=e,o=J.convert(r),s=new URL(`${Qs}/${encodeURIComponent(t.mapbox_id)}`);s.search=He({access_token:this.accessToken,session_token:o.id});let{fetch:l}=Le(),a=yield l(s.toString(),{signal:i});yield Pe(a);let c=yield a.json();return c.url=s.toString(),c})}category(t){return ce(this,arguments,function*(e,r={}){if(!e)throw new Error("category is required");let i=H(H({},this.defaults),r),o=new URL(`${Zs}/${encodeURIComponent(e)}`);o.search=pi(this,di,en).call(this,i);let{fetch:s}=Le(),l=yield s(o.toString(),{signal:i.signal});yield Pe(l);let a=yield l.json();return a.url=o.toString(),a})}reverse(t){return ce(this,arguments,function*(e,r={}){if(!e)throw new Error("lngLat is required");let[i,o]=typeof e=="string"?e.split(",").map(h=>parseFloat(h)):_.convert(e).toArray();if(isNaN(i)||isNaN(o))throw new Error("lngLat is required");let s=H(H({},this.defaults),r),l=new URL(Js);l.search=He({access_token:this.accessToken,language:s.language,limit:s.limit,longitude:i,latitude:o},s.types&&{types:typeof s.types=="string"?s.types:[...s.types].join(",")});let{fetch:a}=Le(),c=yield a(l.toString(),{signal:s.signal});yield Pe(c);let u=yield c.json();return u.url=l.toString(),u})}},on=io;di=new WeakSet;en=function(t){return He({q:t.q,access_token:this.accessToken,language:t.language,limit:t.limit,navigation_profile:t.navigation_profile,route:t.route,route_geometry:t.route_geometry,sar_type:t.sar_type,time_deviation:t.time_deviation,eta_type:t.eta_type,country:t.country,poi_category:t.poi_category,radius:t.radius,user_id:t.user_id,rich_metadata_provider:t.rich_metadata_provider,poi_category_exclusions:t.poi_category_exclusions},t.sessionToken&&{session_token:J.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:_.convert(t.proximity).toArray().join(",")},t.origin&&{origin:typeof t.origin=="string"?t.origin:_.convert(t.origin).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:de.convert(t.bbox).toFlatArray().join(",")},t.types&&{types:typeof t.types=="string"?t.types:[...t.types].join(",")})};on.defaults={language:"en"};var ea="https://api.mapbox.com/autofill/v1",ta="retrieve",ra=`${ea}/${ta}`,tn,no,oo=class{constructor(t={}){Be(this,tn);let e=t,{accessToken:r}=e,i=rn(e,["accessToken"]);this.accessToken=r,this.defaults=H(H({},oo.defaults),i)}validate(t,e){return ce(this,null,function*(){if(!t)throw new Error("searchText is required");let{sessionToken:r,signal:i}=e,o=Qe(H(H({},this.defaults),e),{sessionToken:r}),s=new URL(`${ra}/${encodeURIComponent(t)}`);s.search=pi(this,tn,no).call(this,o);let{fetch:l}=Le(),a=yield l(s.toString(),{signal:i});yield Pe(a);let c=yield a.json();return c.url=s.toString(),c.features.length>0&&(c.features=[c.features[0]]),c})}},sn=oo;tn=new WeakSet;no=function(t){return He({access_token:this.accessToken,language:t.language,country:t.country},t.sessionToken&&{session_token:J.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:_.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:de.convert(t.bbox).toFlatArray().join(",")})};sn.defaults={language:"en",proximity:"ip"};var so="https://api.mapbox.com/geocoding/v5",bl=`${so}/mapbox.places`,yl=`${so}/mapbox.places-permanent`,ia,na;ia=new WeakSet;na=function(t,e=!1){return e&&["proximity","autocomplete","fuzzyMatch","bbox"].forEach(r=>{r in t&&delete t[r]}),He({access_token:this.accessToken,language:t.language,country:t.country,limit:t.limit,autocomplete:t.autocomplete,fuzzyMatch:t.fuzzyMatch,routing:t.routing,worldview:t.worldview},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:_.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:de.convert(t.bbox).toFlatArray().join(",")},t.types&&{types:typeof t.types=="string"?t.types:[...t.types].join(",")})};var an=(t=>(t.exact="exact",t.high="high",t.medium="medium",t.low="low",t))(an||{}),Ct,ln=class{constructor(){Be(this,Ct,{})}addEventListener(t,e){let r=le(this,Ct);r[t]||(r[t]=[]),r[t].push(e)}removeEventListener(t,e){let r=le(this,Ct);if(!r[t])return;let i=r[t],o=i.indexOf(e);o!==-1&&i.splice(o,1)}fire(t,e){let r=le(this,Ct);if(!r[t])return;let i=r[t];for(let o of i)o(e)}};Ct=new WeakMap;function cn(t,e,r){let i=null;return(...o)=>{i!==null&&clearTimeout(i);let s=r&&r();i=setTimeout(()=>{i=null,!(s==null?void 0:s.aborted)&&t(...o)},e)}}function Zi(){let{AbortController:t}=Le();return new t}var Ke,we,ui,Ze=class extends ln{constructor(t,e=0){super();this.sessionToken=new J,Be(this,Ke,void 0),Be(this,we,Zi()),Be(this,ui,void 0),Lt(this,ui,cn((r,...i)=>ce(this,[r,...i],function*(o,s={}){if(le(this,we).abort(),Lt(this,we,Zi()),!o){Lt(this,Ke,null),this.fire("suggest",le(this,Ke));return}try{let l=yield this.search.suggest(o,Qe(H({sessionToken:this.sessionToken},s),{signal:le(this,we).signal}));Lt(this,Ke,l),this.fire("suggest",l)}catch(l){if(l.name==="AbortError")return;this.fire("suggesterror",l)}}),e,()=>le(this,we).signal)),Object.defineProperties(this,{search:{value:t,writable:!1},debounce:{value:e,writable:!1}})}get suggestions(){return le(this,Ke)}suggest(t,e){return le(this,ui).call(this,t,e),new Promise((r,i)=>{let o,s;o=l=>{this.removeEventListener("suggest",o),this.removeEventListener("suggesterror",s),r(l)},s=l=>{this.removeEventListener("suggest",o),this.removeEventListener("suggesterror",s),i(l)},this.addEventListener("suggest",o),this.addEventListener("suggesterror",s)})}clear(){this.suggest("")}retrieve(t,e){return ce(this,null,function*(){let r=yield this.search.retrieve(t,H({sessionToken:this.sessionToken},e));return this.fire("retrieve",r),r})}canRetrieve(t){return this.search.canRetrieve?this.search.canRetrieve(t):!0}canSuggest(t){return this.search.canSuggest?this.search.canSuggest(t):!0}abort(){le(this,we).abort(),Lt(this,we,Zi())}};Ke=new WeakMap;we=new WeakMap;ui=new WeakMap;function Je(t){let{properties:e}=t;return H({},e)}var dn=1.4;function ao(t,e,r=.5){let{center:i,zoom:o}=t.cameraForBounds(e),s=Math.max(o-r,0);return{center:i,zoom:s,speed:dn}}function lo(t){switch(t){case"street":return 15;case"neighborhood":case"postcode":case"locality":case"oaza":return 14;case"place":case"city":return 13;case"district":return 9;case"region":case"prefecture":return 6;case"country":return 4;default:return 16}}function mi(t,e){return`https://api.mapbox.com/styles/v1/${t}/${e}/static/`}var co=mi("mapbox","satellite-streets-v11"),uo="20d01",ho=["mapbox.com","mapbox.cn","tilestream.net"],po=N(`
<template>
  <div class="MapboxSearch">
    <div class="Label" role="label" aria-live="polite" aria-atomic="true">
    </div>
    <div class="Results" aria-hidden="true">
      <div class="ResultsList" role="listbox">
      </div>
      <div class="ResultsAttribution" aria-hidden="true">
        <a href="https://www.mapbox.com/search-service" target="_blank" tabindex="-1">
          Powered by Mapbox
        </a>
      </div>
    </div>
  </div>
</template>
`),fo=N(`
<template>
  <div class="Suggestion" role="option" tabindex="-1">
    <div class="SuggestionIcon" aria-hidden="true"></div>
    <div class="SuggestionText">
      <div class="SuggestionName"></div>
      <div class="SuggestionDesc"></div>
    </div>
  </div>
</template>
`);function ue(){return"mbx"+new J().id.slice(0,8)}function et(t){try{return JSON.parse(t)}catch(e){return null}}function _e(t,e){if(t==null||e==null||typeof t!="object"||typeof e!="object")return t===e;let r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(let o of r)if(!_e(t[o],e[o]))return!1;return!0}function un(t,e){let r=Math.pow(10,e);return Math.round(t*r)/r}function mo(t){return Boolean(t.match(/localhost|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}|::1|\.local|^$/gi))}function go(t){return Boolean(ho.some(e=>t.includes(e)))}var tt,Fe,Ne,q=class extends HTMLElement{constructor(){super(...arguments);d(this,tt,ue());d(this,Fe,void 0);d(this,Ne,e=>`${n(this,tt)}--${e}`)}get template(){return null}get templateStyle(){return null}get templateUserStyle(){return null}clonedCallback(e,r){let i=l=>l.replace(e,r);Qi(this,i);let o=Array.from(this.querySelectorAll("style"));for(let l of o)l.textContent=wt(l.textContent,i);o.length&&p(this,Fe,o[o.length-1]);let s=Array.from(this.querySelectorAll(`[id^="${e}"]`));for(let l of s)l.id=l.id.replace(e,r)}connectedCallback(){if(this.childElementCount>0){let o=this.dataset.seed,s=n(this,tt);o&&o!==s&&(this.clonedCallback(o,s),this.dataset.seed=s);return}this.dataset.seed=n(this,tt);let e=this.template;if(e){let o=this.prepareTemplate(e);this.appendChild(o)}let r=this.templateStyle;if(r){let o=document.createElement("style");o.textContent=this.prepareCSS(r),this.appendChild(o)}let i=document.createElement("style");this.templateUserStyle&&(i.textContent=this.prepareCSS(this.templateUserStyle)),this.appendChild(i),p(this,Fe,i)}prepareTemplate(e){let r=e.content.firstElementChild;return Qi(r.cloneNode(!0),n(this,Ne))}prepareCSS(e){return Ki(e,n(this,Ne))}updateTemplateUserStyle(e){!n(this,Fe)||(n(this,Fe).textContent=this.prepareCSS(e))}querySelector(e){return super.querySelector(wt(e,n(this,Ne)))}querySelectorAll(e){return super.querySelectorAll(wt(e,n(this,Ne)))}addEventListener(e,r,i){super.addEventListener(e,r,i)}removeEventListener(e,r,i){super.removeEventListener(e,r,i)}dispatchEvent(e){return super.dispatchEvent(e)}};tt=new WeakMap,Fe=new WeakMap,Ne=new WeakMap;var vo='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 3.8a1 1 0 0 1 1.4 0L9 7.58l3.8-3.8a1 1 0 1 1 1.4 1.42L10.42 9l3.8 3.8a1 1 0 0 1-1.42 1.4L9 10.42l-3.8 3.8a1 1 0 0 1-1.4-1.42L7.58 9l-3.8-3.8a1 1 0 0 1 0-1.4Z" fill="currentColor"/></svg>';var bo='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 16A7 7 0 1 0 9 2a7 7 0 0 0 0 14ZM6.88 4.88a2.58 2.58 0 0 1 1.83-.75h1.08a2.58 2.58 0 0 1 2.59 2.58v.16c0 1-.53 1.94-1.4 2.46l-.56.34c-.27.16-.45.42-.52.71-.03.14-.14.25-.28.25H8.38a.23.23 0 0 1-.24-.25c.08-.91.59-1.74 1.38-2.21l.56-.34c.34-.2.54-.57.54-.96V6.7a.83.83 0 0 0-.83-.83H8.71a.83.83 0 0 0-.84.83v.18a.87.87 0 1 1-1.75 0V6.7c0-.69.28-1.34.76-1.83ZM10 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" fill="currentColor"/></svg>';var yo='<svg width="48" height="56" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#a)"><path d="m24 50.4 13.79-14.12a18.82 18.82 0 0 0 4.23-20.86 19.23 19.23 0 0 0-7.19-8.6 19.76 19.76 0 0 0-21.66 0c-3.21 2.11-5.71 5.1-7.19 8.6a18.82 18.82 0 0 0 4.23 20.86L24 50.4Z" fill="currentColor"/><path d="M37.26 35.75 24 49.34 10.75 35.76l-.01-.01A18.07 18.07 0 0 1 6.68 15.7a18.48 18.48 0 0 1 6.9-8.26 19 19 0 0 1 20.84 0 18.48 18.48 0 0 1 6.9 8.26 18.07 18.07 0 0 1-4.06 20.04Z" stroke="#fff" stroke-width="1.5"/></g><circle cx="24" cy="22.45" fill="#fff" r="5.85"/><defs><filter id="a" x=".5" y=".6" width="47" height="54.8" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="2"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_17_871"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_17_871" result="shape"/></filter></defs></svg>';var xo=`<svg width="24" height="24" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M1.08 14.94 5.625 3.06h1.17l-3.42 11.88H1.08Zm15.885 0L12.42 3.06h-1.17l3.42 11.88h2.295Zm-6.86-1.44H7.946l.128-2.61h1.912l.119 2.61Zm-.217-4.77H8.181l.088-1.8h1.537l.082 1.8ZM9.74 5.49h-1.4l.049-.99h1.306l.045.99Z" fill="currentColor" />
</svg>`;var Eo=`<!-- TODO: I'm not sure if the way I added the circle will "scale" properly, need to check that -->
<svg width="24" height="24" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path fill="none" stroke="currentColor" stroke-width="1.5" d="M4 7a5 5 0 1 1 10 0c0 3.025-3.28 6.713-5 9-1.72-2.287-5-5.975-5-9z"></path>
    <circle cx="9" cy="7" r="2" fill="currentColor"></circle>
</svg>`;var Rt="1.0.0-beta.16";var ua=`https://api.mapbox.com/search-js/v${Rt}/img/style-toggle-satellite.jpg`,ha=`https://api.mapbox.com/search-js/v${Rt}/img/style-toggle-default.jpg`,pa=768-1,fa=`@media only screen and (max-width: ${pa}px)`,hn={variables:{unit:["mobile","16px","14px"],unitHeader:["mobile","24px","18px"],minWidth:"min(300px, 100vw)",spacing:"0.75em",padding:"0.5em 0.75em",paddingFooterLabel:"0.5em 0.75em",paddingModal:"1.25em",colorText:"rgba(0, 0, 0, 0.75)",colorPrimary:"#4264FB",colorSecondary:"#667F91",colorBackground:"#fff",colorBackgroundHover:"#f5f5f5",colorBackgroundActive:"#f0f0f0",colorBackdrop:"rgba(102, 127, 145, 0.3)",border:"none",borderRadius:"4px",boxShadow:`
      0 0 10px 2px rgba(0, 0, 0, 0.05),
      0 0 6px 1px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.1)
    `,lineHeight:"1.2em",fontFamily:`
      -apple-system, BlinkMacSystemFont,
      avenir next, avenir,
      segoe ui,
      helvetica neue, helvetica,
      Ubuntu, roboto, noto, arial, sans-serif
    `,fontWeight:"normal",fontWeightSemibold:"600",fontWeightBold:"bold",duration:"150ms",curve:"ease-out"},icons:{close:vo,question:bo,marker:yo,street:xo,addressMarker:Eo},images:{styleToggleDefault:ha,styleToggleSatellite:ua}};function U(t,e={}){let r=x(x({},hn.variables),e.variables||{}),i=e.cssText||"",o="";for(let[s,l]of Object.entries(r)){if(!Array.isArray(l)){o+=`--${s}: ${l};`;continue}if(l[0]!=="mobile"){let u=JSON.stringify(l);throw new Error(`Unsupported expression in theme variables: ${s} ${u}`)}let[,a,c]=l;i+=`${fa} { ${t} { --${s}: ${a} !important; } }`,o+=`--${s}: ${c};`}return i+`${t} { ${o} }`}function X(t,e={}){return x(x({},hn.icons),e.icons||{})[t]}function Ao(t,e={}){return x(x({},hn.images),e.images||{})[t]}function vi(t){return t.split("-")[0]}function pn(t){return t.split("-")[1]}function fn(t){return["top","bottom"].includes(vi(t))?"x":"y"}function To(t){return t==="y"?"height":"width"}function Mo(t,e,r){let{reference:i,floating:o}=t,s=i.x+i.width/2-o.width/2,l=i.y+i.height/2-o.height/2,a=fn(e),c=To(a),u=i[c]/2-o[c]/2,h=a==="x",f;switch(vi(e)){case"top":f={x:s,y:i.y-o.height};break;case"bottom":f={x:s,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:l};break;case"left":f={x:i.x-o.width,y:l};break;default:f={x:i.x,y:i.y}}switch(pn(e)){case"start":f[a]-=u*(r&&h?-1:1);break;case"end":f[a]+=u*(r&&h?-1:1)}return f}var wo=(t,e,r)=>F(void 0,null,function*(){let{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:l}=r,a=yield l.isRTL==null?void 0:l.isRTL(e),c=yield l.getElementRects({reference:t,floating:e,strategy:o}),{x:u,y:h}=Mo(c,i,a),f=i,b={};for(let E=0;E<s.length;E++){let{name:v,fn:y}=s[E],{x:M,y:T,data:j,reset:O}=yield y({x:u,y:h,initialPlacement:i,placement:f,strategy:o,middlewareData:b,rects:c,platform:l,elements:{reference:t,floating:e}});u=M!=null?M:u,h=T!=null?T:h,b=G(x({},b),{[v]:x(x({},b[v]),j)}),O&&(typeof O=="object"&&(O.placement&&(f=O.placement),O.rects&&(c=O.rects===!0?yield l.getElementRects({reference:t,floating:e,strategy:o}):O.rects),{x:u,y:h}=Mo(c,f,a)),E=-1)}return{x:u,y:h,placement:f,strategy:o,middlewareData:b}});function ma(t){return typeof t!="number"?function(e){return x({top:0,right:0,bottom:0,left:0},e)}(t):{top:t,right:t,bottom:t,left:t}}function It(t){return G(x({},t),{top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height})}function Lo(t,e){return F(this,null,function*(){var r;e===void 0&&(e={});let{x:i,y:o,platform:s,rects:l,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:b=!1,padding:E=0}=e,v=ma(E),y=a[b?f==="floating"?"reference":"floating":f],M=It(yield s.getClippingRect({element:(r=yield s.isElement==null?void 0:s.isElement(y))==null||r?y:y.contextElement||(yield s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:c})),T=It(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?G(x({},l.floating),{x:i,y:o}):l.reference,offsetParent:yield s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating),strategy:c}):l[f]);return{top:M.top-T.top+v.top,bottom:T.bottom-M.bottom+v.bottom,left:M.left-T.left+v.left,right:T.right-M.right+v.right}})}var ga={left:"right",right:"left",bottom:"top",top:"bottom"};function gi(t){return t.replace(/left|right|bottom|top/g,e=>ga[e])}function va(t,e,r){r===void 0&&(r=!1);let i=pn(t),o=fn(t),s=To(o),l=o==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(l=gi(l)),{main:l,cross:gi(l)}}var ba={start:"end",end:"start"};function So(t){return t.replace(/start|end/g,e=>ba[e])}var ya=["top","right","bottom","left"],Yl=ya.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);var mn=function(t){return t===void 0&&(t={}),{name:"flip",options:t,fn(e){return F(this,null,function*(){var r;let{placement:i,middlewareData:o,rects:s,initialPlacement:l,platform:a,elements:c}=e,A=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:b="bestFit",flipAlignment:E=!0}=A,v=Un(A,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]),y=vi(i),M=f||(y===l||!E?[gi(l)]:function(w){let k=gi(w);return[So(w),k,So(k)]}(l)),T=[l,...M],j=yield Lo(e,v),O=[],Oe=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&O.push(j[y]),h){let{main:w,cross:k}=va(i,s,yield a.isRTL==null?void 0:a.isRTL(c.floating));O.push(j[w],j[k])}if(Oe=[...Oe,{placement:i,overflows:O}],!O.every(w=>w<=0)){var P,m;let w=((P=(m=o.flip)==null?void 0:m.index)!=null?P:0)+1,k=T[w];if(k)return{data:{index:w,overflows:Oe},reset:{placement:k}};let B="bottom";switch(b){case"bestFit":{var g;let Te=(g=Oe.map(Z=>[Z,Z.overflows.filter(ie=>ie>0).reduce((ie,Vi)=>ie+Vi,0)]).sort((Z,ie)=>Z[1]-ie[1])[0])==null?void 0:g[0].placement;Te&&(B=Te);break}case"initialPlacement":B=l}if(i!==B)return{reset:{placement:B}}}return{}})}}};var gn=function(t){return t===void 0&&(t=0),{name:"offset",options:t,fn(e){return F(this,null,function*(){let{x:r,y:i}=e,o=yield function(s,l){return F(this,null,function*(){let{placement:a,platform:c,elements:u}=s,h=yield c.isRTL==null?void 0:c.isRTL(u.floating),f=vi(a),b=pn(a),E=fn(a)==="x",v=["left","top"].includes(f)?-1:1,y=h&&E?-1:1,M=typeof l=="function"?l(s):l,{mainAxis:T,crossAxis:j,alignmentAxis:O}=typeof M=="number"?{mainAxis:M,crossAxis:0,alignmentAxis:null}:x({mainAxis:0,crossAxis:0,alignmentAxis:null},M);return b&&typeof O=="number"&&(j=b==="end"?-1*O:O),E?{x:j*y,y:T*v}:{x:T*v,y:j*y}})}(e,t);return{x:r+o.x,y:i+o.y,data:o}})}}};function Po(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function be(t){if(t==null)return window;if(!Po(t)){let e=t.ownerDocument;return e&&e.defaultView||window}return t}function Pt(t){return be(t).getComputedStyle(t)}function ge(t){return Po(t)?"":t?(t.nodeName||"").toLowerCase():""}function Bo(){let t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function he(t){return t instanceof be(t).HTMLElement}function ke(t){return t instanceof be(t).Element}function bn(t){return typeof ShadowRoot=="undefined"?!1:t instanceof be(t).ShadowRoot||t instanceof ShadowRoot}function xi(t){let{overflow:e,overflowX:r,overflowY:i}=Pt(t);return/auto|scroll|overlay|hidden/.test(e+i+r)}function xa(t){return["table","td","th"].includes(ge(t))}function Co(t){let e=/firefox/i.test(Bo()),r=Pt(t);return r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].includes(r.willChange)||e&&r.willChange==="filter"||e&&!!r.filter&&r.filter!=="none"}function Ho(){return!/^((?!chrome|android).)*safari/i.test(Bo())}var ko=Math.min,Ot=Math.max,bi=Math.round;function ve(t,e,r){var i,o,s,l;e===void 0&&(e=!1),r===void 0&&(r=!1);let a=t.getBoundingClientRect(),c=1,u=1;e&&he(t)&&(c=t.offsetWidth>0&&bi(a.width)/t.offsetWidth||1,u=t.offsetHeight>0&&bi(a.height)/t.offsetHeight||1);let h=ke(t)?be(t):window,f=!Ho()&&r,b=(a.left+(f&&(i=(o=h.visualViewport)==null?void 0:o.offsetLeft)!=null?i:0))/c,E=(a.top+(f&&(s=(l=h.visualViewport)==null?void 0:l.offsetTop)!=null?s:0))/u,v=a.width/c,y=a.height/u;return{width:v,height:y,top:E,right:b+v,bottom:E+y,left:b,x:b,y:E}}function Ce(t){return(e=t,(e instanceof be(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function Ei(t){return ke(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function _o(t){return ve(Ce(t)).left+Ei(t).scrollLeft}function Ea(t,e,r){let i=he(e),o=Ce(e),s=ve(t,i&&function(c){let u=ve(c);return bi(u.width)!==c.offsetWidth||bi(u.height)!==c.offsetHeight}(e),r==="fixed"),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(i||!i&&r!=="fixed")if((ge(e)!=="body"||xi(o))&&(l=Ei(e)),he(e)){let c=ve(e,!0);a.x=c.x+e.clientLeft,a.y=c.y+e.clientTop}else o&&(a.x=_o(o));return{x:s.left+l.scrollLeft-a.x,y:s.top+l.scrollTop-a.y,width:s.width,height:s.height}}function Fo(t){return ge(t)==="html"?t:t.assignedSlot||t.parentNode||(bn(t)?t.host:null)||Ce(t)}function Ro(t){return he(t)&&getComputedStyle(t).position!=="fixed"?t.offsetParent:null}function vn(t){let e=be(t),r=Ro(t);for(;r&&xa(r)&&getComputedStyle(r).position==="static";)r=Ro(r);return r&&(ge(r)==="html"||ge(r)==="body"&&getComputedStyle(r).position==="static"&&!Co(r))?e:r||function(i){let o=Fo(i);for(bn(o)&&(o=o.host);he(o)&&!["html","body"].includes(ge(o));){if(Co(o))return o;o=o.parentNode}return null}(t)||e}function Io(t){if(he(t))return{width:t.offsetWidth,height:t.offsetHeight};let e=ve(t);return{width:e.width,height:e.height}}function No(t){let e=Fo(t);return["html","body","#document"].includes(ge(e))?t.ownerDocument.body:he(e)&&xi(e)?e:No(e)}function yi(t,e){var r;e===void 0&&(e=[]);let i=No(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=be(i),l=o?[s].concat(s.visualViewport||[],xi(i)?i:[]):i,a=e.concat(l);return o?a:a.concat(yi(l))}function Oo(t,e,r){return e==="viewport"?It(function(i,o){let s=be(i),l=Ce(i),a=s.visualViewport,c=l.clientWidth,u=l.clientHeight,h=0,f=0;if(a){c=a.width,u=a.height;let b=Ho();(b||!b&&o==="fixed")&&(h=a.offsetLeft,f=a.offsetTop)}return{width:c,height:u,x:h,y:f}}(t,r)):ke(e)?function(i,o){let s=ve(i,!1,o==="fixed"),l=s.top+i.clientTop,a=s.left+i.clientLeft;return{top:l,left:a,x:a,y:l,right:a+i.clientWidth,bottom:l+i.clientHeight,width:i.clientWidth,height:i.clientHeight}}(e,r):It(function(i){var o;let s=Ce(i),l=Ei(i),a=(o=i.ownerDocument)==null?void 0:o.body,c=Ot(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),u=Ot(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),h=-l.scrollLeft+_o(i),f=-l.scrollTop;return Pt(a||s).direction==="rtl"&&(h+=Ot(s.clientWidth,a?a.clientWidth:0)-c),{width:c,height:u,x:h,y:f}}(Ce(t)))}function Aa(t){let e=yi(t),r=["absolute","fixed"].includes(Pt(t).position)&&he(t)?vn(t):t;return ke(r)?e.filter(i=>ke(i)&&function(o,s){let l=s.getRootNode==null?void 0:s.getRootNode();if(o.contains(s))return!0;if(l&&bn(l)){let a=s;do{if(a&&o===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(i,r)&&ge(i)!=="body"):[]}var Ma={getClippingRect:function(t){let{element:e,boundary:r,rootBoundary:i,strategy:o}=t,s=[...r==="clippingAncestors"?Aa(e):[].concat(r),i],l=s[0],a=s.reduce((c,u)=>{let h=Oo(e,u,o);return c.top=Ot(h.top,c.top),c.right=ko(h.right,c.right),c.bottom=ko(h.bottom,c.bottom),c.left=Ot(h.left,c.left),c},Oo(e,l,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:r,strategy:i}=t,o=he(r),s=Ce(r);if(r===s)return e;let l={scrollLeft:0,scrollTop:0},a={x:0,y:0};if((o||!o&&i!=="fixed")&&((ge(r)!=="body"||xi(s))&&(l=Ei(r)),he(r))){let c=ve(r,!0);a.x=c.x+r.clientLeft,a.y=c.y+r.clientTop}return G(x({},e),{x:e.x-l.scrollLeft+a.x,y:e.y-l.scrollTop+a.y})},isElement:ke,getDimensions:Io,getOffsetParent:vn,getDocumentElement:Ce,getElementRects:t=>{let{reference:e,floating:r,strategy:i}=t;return{reference:Ea(e,vn(r),i),floating:G(x({},Io(r)),{x:0,y:0})}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>Pt(t).direction==="rtl"};function Do(t,e,r,i){i===void 0&&(i={});let{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:l=!0,animationFrame:a=!1}=i,c=o&&!a,u=s&&!a,h=c||u?[...ke(t)?yi(t):[],...yi(e)]:[];h.forEach(v=>{c&&v.addEventListener("scroll",r,{passive:!0}),u&&v.addEventListener("resize",r)});let f,b=null;l&&(b=new ResizeObserver(r),ke(t)&&!a&&b.observe(t),b.observe(e));let E=a?ve(t):null;return a&&function v(){let y=ve(t);!E||y.x===E.x&&y.y===E.y&&y.width===E.width&&y.height===E.height||r(),E=y,f=requestAnimationFrame(v)}(),l||r(),()=>{var v;h.forEach(y=>{c&&y.removeEventListener("scroll",r),u&&y.removeEventListener("resize",r)}),(v=b)==null||v.disconnect(),b=null,a&&cancelAnimationFrame(f)}}var jo=(t,e,r)=>wo(t,e,x({platform:Ma},r));var De,Ai,Mi=class{constructor(e,r,i){d(this,De,void 0);d(this,Ai,{placement:"bottom-start",flip:!1,offset:10});this.update=()=>F(this,null,function*(){let e={placement:this.options.placement,middleware:[gn(this.options.offset),this.options.flip&&mn()].filter(Boolean)},{x:r,y:i}=yield jo(this.referenceEl,this.floatingEl,e);Object.assign(this.floatingEl.style,{left:`${r}px`,top:`${i}px`})});this.referenceEl=e,this.floatingEl=r,p(this,De,x(x({},n(this,Ai)),i)),this.destroy=Do(this.referenceEl,this.floatingEl,this.update)}get options(){return n(this,De)}set options(e){p(this,De,x(x({},n(this,De)),e))}};De=new WeakMap,Ai=new WeakMap;var ee="*{box-sizing:border-box!important}[role=button]{cursor:pointer}.MapboxSearch{--width:0;display:none}.Results{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);min-width:var(--minWidth);overflow-y:auto;position:absolute;transform:translateZ(0);transition:visibility var(--duration);width:var(--width);z-index:1000}.Results:not([aria-hidden=true]){visibility:visible}.Results[aria-hidden=true]{animation:fadein var(--duration) var(--curve) reverse forwards;visibility:hidden}.Suggestion{align-items:center;display:flex;padding:var(--padding)}.Suggestion:hover{cursor:pointer}.Suggestion[aria-selected=true]{background-color:var(--colorBackgroundHover)}.Suggestion:active{background-color:var(--colorBackgroundActive)}.SuggestionName{font-weight:var(--fontWeightBold)}.SuggestionIcon{margin-right:6px}.SuggestionIcon[aria-hidden=true]{display:none}.ResultsAttribution{padding:var(--paddingFooterLabel)}.ResultsAttribution a{color:var(--colorSecondary)}.ResultsAttribution a:not(:hover){text-decoration:none}.ResultsList{list-style:none;margin:0;padding:0}.Label{display:none}.Input{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--padding);width:100%}mapbox-address-confirmation-feature[aria-hidden=true],mapbox-address-confirmation-no-feature[aria-hidden=true]{display:none}.MapboxAddressConfirmation{align-items:center;background-color:var(--colorBackdrop);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;transform:translateZ(0);z-index:1000}.MapboxAddressConfirmation:not([aria-hidden=true]){animation:fadein var(--duration) var(--curve) forwards;visibility:visible}.MapboxAddressConfirmation[aria-hidden=true]{visibility:hidden}.ContentFeature,.ContentNoFeature{width:var(--minWidth)}.Modal{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--paddingModal);width:100%}@media screen and (max-width:480px){.MapboxAddressConfirmation{align-items:flex-end}.ContentFeature,.ContentNoFeature{width:100%}.Modal{border-bottom-left-radius:0;border-bottom-right-radius:0}}.ModalHeader{align-items:center;color:var(--colorPrimary);display:flex;font-size:var(--unitHeader);font-weight:var(--fontWeightBold);margin-bottom:var(--spacing);user-select:none;width:100%}.ModalMap{height:calc(var(--minWidth)*9/16);margin-left:calc(var(--paddingModal)*-1);width:calc(100% + var(--paddingModal)*2)}.ModalMap[aria-hidden=true]{display:none}.Icon{height:var(--unitHeader);width:var(--unitHeader)}.Icon.IconClose{color:var(--colorSecondary)}.ModalHeaderTitle{flex:1;margin-left:.25em}.ModalFooter{color:var(--colorSecondary);margin-top:var(--spacing);text-align:center}.ModalFooter[aria-hidden=true]{display:none}.ModalSubheader{font-weight:var(--fontWeightBold);user-select:none}.ModalDescription{color:var(--colorPrimary)}.ModalAddress,.ModalSubheader{margin-bottom:var(--spacing)}.ModalAddress.ModalAddressApprove{color:var(--colorPrimary)}.Button{border-radius:var(--borderRadius);cursor:pointer;font-weight:var(--fontWeightSemibold);margin-top:var(--spacing);padding:var(--padding);text-align:center;user-select:none;width:100%}.Button[aria-hidden=true]{display:none}.Button.ButtonPrimary{background-color:var(--colorPrimary);color:var(--colorBackground)}.Button.ButtonSecondary{border:1px solid var(--colorSecondary);color:var(--colorSecondary)}@keyframes fadein{0%{opacity:0}to{opacity:1}}.MapboxAddressMinimap{font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight)}.MapboxAddressMinimap[aria-hidden=true]{display:none}.MinimapImageContainer{border-radius:var(--borderRadius);overflow:hidden}.MinimapImage{height:unset;max-height:unset;max-width:unset;position:relative;width:unset}.MinimapInnerFrame{border:var(--border);border-radius:inherit;height:inherit;left:0;overflow:hidden;position:absolute;top:0;width:inherit}.MinimapMarker{left:50%;position:absolute;top:50%}.MinimapMarker>svg{color:var(--colorPrimary);display:block!important}.MinimapAttributionLogo{bottom:0;left:0;margin:0 0 6px 6px;position:absolute}.MinimapAttributionLogo a{cursor:pointer;display:block;height:23px;width:88px}.MinimapAttributionText{background-color:hsla(0,0%,100%,.65);bottom:0;font:11px/16px Helvetica Neue,Arial,Helvetica,sans-serif;padding:0 5px;position:absolute;right:0}.MinimapAttributionText a{color:rgba(0,0,0,.75);text-decoration:none}.MinimapAttributionText a:hover{color:inherit;text-decoration:underline}.MinimapAttributionText a:not(:first-child){margin-left:3px}.MinimapStyleToggle{background-position:0;background-repeat:no-repeat;background-size:contain;border:2px solid #fff;border-radius:3px;box-shadow:var(--boxShadow);cursor:pointer;height:2em;position:absolute;right:var(--spacing);top:var(--spacing);width:2em}.MinimapFooter{color:var(--colorSecondary);font-family:var(--fontFamily);font-size:var(--unit);margin-top:var(--spacing)}.MinimapFooter[aria-hidden=true]{display:none}.MinimapEditButtons{bottom:26px;display:flex;font-family:var(--fontFamily);position:absolute;right:var(--spacing)}.MinimapEditButtons .Button{box-shadow:var(--boxShadow)}.MinimapButtonCancel{background-color:var(--colorBackground);margin-left:var(--spacing)}.draggable{cursor:move;cursor:grab}.draggable:active{cursor:grabbing}";var S=class extends CustomEvent{constructor(e,r){super(e,{composed:!0,detail:r})}clone(e){let r=new S(this.type,this.detail);return e&&Object.defineProperty(r,"target",{value:e}),r}};var Uo="Type in 2 or more characters for results.",$o="When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.",Go="No search results.",Yo=(t,e,r)=>`${e} ${e===1?"result is":"results are"} available. ${t}. ${r} of ${e} is selected.`,Wo=t=>`${t} ${t===1?"result is":"results are"} available. Use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.`;function Si(t){let e=t.currentTarget;(t.key===" "||t.key==="Enter")&&(t.preventDefault(),t.stopPropagation(),e.dispatchEvent(new MouseEvent("click",{bubbles:!0,composed:!0})))}var qo="address-autofill__description",rt=()=>{let t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.setAttribute("role","status"),t.setAttribute("style","border: 0px;clip: rect(0px, 0px, 0px, 0px);height: 1px;margin-bottom: -1px;margin-right: -1px;overflow: hidden;padding: 0px;position: absolute;white-space: nowrap;width: 1px;");let e=document.createElement("div");return e.setAttribute("id",qo),t.appendChild(e),t},yn=t=>{var r;let e=(r=document.body.querySelector(`[id="${qo}"]`))!=null?r:null;e&&(e.textContent=t)},Ti=t=>{t.name=t.name+" address-search",t.setAttribute("data-lpignore","true")},Vo=(t,e,r)=>{let i=null,o=!e||e.length===0;if((t==null?void 0:t.length)<2)i=Uo+" "+$o;else if(o)i=Go;else if(r!==void 0){let s=e[r],l=s.address||s.full_address||s.feature_name;i=Yo(l,e.length,r+1)}else i=Wo(e.length);return i};var Ht=(t,e)=>{switch(e){case 0:return t.address_line1||t.matching_name||t.feature_name;case 3:return t.name;case 1:return t.place_name.split(",")[0];default:return""}},Xo=(t,e)=>{switch(e){case 0:return t.description;case 3:return t.place_formatted;case 1:return t.place_name.split(",").splice(1).join(",").trim();default:return""}};function xn(t,e){return`${t}-${e}`}var Y,W,it,ye,nt,_t,ot,Ft,zo,wi,Ta,Nt,Dt,jt,st,at,je,Ut,xe=class extends q{constructor(){super(...arguments);d(this,Ft);d(this,wi);this.suggestions=null;d(this,Y,null);d(this,W,void 0);d(this,it,void 0);d(this,ye,void 0);d(this,nt,void 0);d(this,_t,null);d(this,ot,void 0);d(this,Nt,{});d(this,Dt,{});d(this,jt,e=>{let{Results:r}=n(this,W),i=e.target;if(i.dataset.mapboxSuccess){delete i.dataset.mapboxSuccess;return}let o=i.value;this.renderAriaMessage(),r.setAttribute("aria-busy","true"),this.dispatchEvent(new S("input",o))});this.renderAriaMessage=()=>{var r;let e=Vo((r=this.input)==null?void 0:r.value,this.suggestions,this.selectedIndex);yn(e)};this.clearAriaMessage=()=>{yn("")};this.handleSuggest=e=>{if(this.suggestions=e,(!e||e.length===0)&&this.renderAriaMessage(),!e){this.hideResults();return}li(this,wi,Ta).call(this),e.length&&li(this,Ft,zo).call(this);let{Results:r}=n(this,W);r.setAttribute("aria-busy","false")};this.handleError=()=>{let{Results:e}=n(this,W);e.setAttribute("aria-busy","false"),this.hideResults()};d(this,st,e=>F(this,null,function*(){let r=this.input;r&&(r.dataset.mapboxSuccess="true"),this.dispatchEvent(new S("select",e)),this.hideResults()}));d(this,at,()=>{let e=this.input;delete e.dataset.mapboxSuccess,this.dispatchEvent(new S("focus")),this.renderAriaMessage(),li(this,Ft,zo).call(this)});d(this,je,()=>{document.activeElement!==this.input&&(this.dispatchEvent(new S("blur")),this.clearAriaMessage(),this.hideResults())});this.handleArrowUp=()=>{this.selectedIndex===void 0?this.selectedIndex=this.suggestions.length-1:this.selectedIndex===0?this.selectedIndex=void 0:this.selectedIndex=Math.max(0,this.selectedIndex-1)};this.handleArrowDown=()=>{this.selectedIndex===void 0?this.selectedIndex=0:this.selectedIndex===this.suggestions.length-1?this.selectedIndex=void 0:this.selectedIndex=Math.min(this.selectedIndex+1,this.suggestions.length-1)};d(this,Ut,e=>{var r;if(!!((r=this.suggestions)==null?void 0:r.length)){if(e.key==="ArrowDown"){e.preventDefault(),this.handleArrowDown();return}if(e.key==="ArrowUp"){e.preventDefault(),this.handleArrowUp();return}if(e.key==="Escape"){this.hideResults();return}if(this.selectedIndex!==void 0){if(e.key==="Tab"){n(this,st).call(this,this.suggestions[this.selectedIndex]);return}if(e.key==="Enter"){e.preventDefault(),n(this,st).call(this,this.suggestions[this.selectedIndex]);return}}}})}get template(){return po}get templateStyle(){return ee}get templateUserStyle(){return U(".MapboxSearch",this.theme)}get input(){return n(this,nt)}set input(e){let r=n(this,nt);r&&(r.removeEventListener("input",n(this,jt)),r.removeEventListener("focus",n(this,at)),r.removeEventListener("blur",n(this,je)),r.removeEventListener("keydown",n(this,Ut)),n(this,Y)&&n(this,Y).destroy()),e&&(e.addEventListener("input",n(this,jt)),e.addEventListener("focus",n(this,at)),e.addEventListener("blur",n(this,je)),e.addEventListener("keydown",n(this,Ut)),e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls",n(this,ye)),this.isConnected&&p(this,Y,new Mi(e,n(this,W).Results,this.popoverOptions))),p(this,nt,e)}get searchService(){return n(this,_t)}set searchService(e){p(this,_t,e)}get selectedIndex(){return n(this,ot)}set selectedIndex(e){let r=n(this,ot);p(this,ot,e);let{ResultsList:i}=n(this,W),o=xn(n(this,ye),e);if(e!==void 0?(this.input.setAttribute("aria-activedescendant",o),i.setAttribute("aria-activedescendant",o)):(this.input.removeAttribute("aria-activedescendant"),i.removeAttribute("aria-activedescendant")),r!==e){let s=xn(n(this,ye),r),l=i.querySelector(`#${s}`);if(l==null||l.removeAttribute("aria-selected"),l==null||l.setAttribute("tabindex","-1"),e!==void 0){let a=i.querySelector(`#${o}`);a==null||a.setAttribute("aria-selected","true"),a==null||a.setAttribute("tabindex","0")}}this.renderAriaMessage()}hideResults(){let{Results:e,ResultsList:r}=n(this,W);e.setAttribute("aria-hidden","true"),this.input.setAttribute("aria-expanded","false"),r.removeAttribute("aria-activedescendant"),this.input.removeAttribute("aria-activedescendant")}renderItem(e){let r=this.prepareTemplate(fo);return r.id=xn(n(this,ye),e),r}fillItem(e,r,i,o){let s=e.querySelector('[class$="SuggestionIcon"]'),l=e.querySelector('[class$="SuggestionName"]'),a=e.querySelector('[class$="SuggestionDesc"]');this.searchService===0?(s.innerHTML=X(r.accuracy==="street"?"street":"addressMarker",this.theme),s.removeAttribute("aria-hidden")):s.setAttribute("aria-hidden","true"),l.textContent=a.textContent="",l.textContent=Ht(r,this.searchService),a.textContent=Xo(r,this.searchService),i===this.selectedIndex?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected"),e.setAttribute("aria-posinset",(i+1).toString()),e.setAttribute("aria-setsize",o.toString())}get theme(){return n(this,Nt)}set theme(e){p(this,Nt,e),!(!n(this,W)||!e)&&this.updateTemplateUserStyle(U(".MapboxSearch",e))}get popoverOptions(){return n(this,Dt)}set popoverOptions(e){p(this,Dt,e),n(this,Y)&&(n(this,Y).options=e,n(this,Y).update())}connectedCallback(){super.connectedCallback(),p(this,it,this.dataset.seed+"-Label"),p(this,ye,this.dataset.seed+"-ResultsList"),p(this,W,se(this,{MapboxSearch:".MapboxSearch",Results:".Results",ResultsList:".ResultsList",Label:".Label"}));let{Results:e,ResultsList:r,Label:i}=n(this,W);i.id=n(this,it),r.id=n(this,ye),r.setAttribute("aria-labelledby",n(this,it)),e.addEventListener("blur",n(this,je)),!n(this,Y)&&this.input&&p(this,Y,new Mi(this.input,n(this,W).Results,this.popoverOptions)),requestAnimationFrame(()=>{n(this,Y)&&n(this,Y).update()})}disconnectedCallback(){this.input=null;let{Results:e}=n(this,W);e.removeEventListener("blur",n(this,je)),n(this,Y)&&n(this,Y).destroy()}focus(){document.activeElement===this.input?n(this,at).call(this):this.input.focus()}blur(){this.input.blur()}updatePopover(){n(this,Y)&&n(this,Y).update()}};Y=new WeakMap,W=new WeakMap,it=new WeakMap,ye=new WeakMap,nt=new WeakMap,_t=new WeakMap,ot=new WeakMap,Ft=new WeakSet,zo=function(){if(!this.suggestions||!this.suggestions.length)return;let{Results:e,MapboxSearch:r}=n(this,W),i=this.input.getBoundingClientRect();r.style.setProperty("--width",`${i.width}px`),r.style.setProperty("display","block"),this.input.setAttribute("aria-expanded","true"),e.removeAttribute("aria-hidden"),this.selectedIndex=void 0},wi=new WeakSet,Ta=function(){let{ResultsList:e}=n(this,W);if(!this.suggestions||!this.suggestions.length){e.innerHTML="",this.hideResults();return}let r=qn(e);if(this.suggestions.length>r.length)for(let i=r.length;i<this.suggestions.length;i++){let o=this.renderItem(i);r.push(o),o.onmouseenter=()=>{this.selectedIndex=i},o.onmouseleave=()=>{this.selectedIndex=void 0},e.appendChild(o)}if(this.suggestions.length<r.length)for(let i=this.suggestions.length;i<r.length;i++)r[i].remove();for(let i of this.suggestions){let o=this.suggestions.indexOf(i),s=r[o];this.fillItem(s,i,o,this.suggestions.length),s.onclick=()=>{n(this,st).call(this,i)}}},Nt=new WeakMap,Dt=new WeakMap,jt=new WeakMap,st=new WeakMap,at=new WeakMap,je=new WeakMap,Ut=new WeakMap;window.MapboxSearchListbox=xe;window.customElements.get("mapbox-search-listbox")||customElements.define("mapbox-search-listbox",xe);var wa=new Set(["street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code"]),La=new Set(["off","on","true","false"]);function En(t){let e=t.parentNode;for(;e;){if(e instanceof HTMLFormElement)return e;e=e.parentNode}return null}function $t(t){let e=t||document;return Array.from(e.querySelectorAll('input[autocomplete~="address-line1"], input[autocomplete~="street-address"]'))}var Ca="section-",ka="section-default",Ra="section-shipping",Ia="section-billing";function Gt(t){let e=Array.from(t.querySelectorAll("[autocomplete]")).filter(i=>{let o=i.tagName.toLowerCase();return o==="input"||o==="select"||o==="textarea"}),r=[];for(let i of e){if(!Xn(i))continue;let o=i.getAttribute("autocomplete")||"";if(!o||La.has(o))continue;let s=o.toLowerCase().split(" ");if(s.length>3)continue;let l=s[s.length-1];if(!wa.has(l))continue;s.pop();let a=ka;if(s.length){let c=s[s.length-1];c==="shipping"&&(a=Ra,s.pop()),c==="billing"&&(a=Ia,s.pop())}if(s.length){let c=s[s.length-1];c.startsWith(Ca)&&(a=c)}r.push({input:i,section:a,field:l})}return r}function Yt(t,e){let r=[],i=[],o=Gt(t),s=null;for(let{input:l,section:a,field:c}of o){let u=r.length-1,h=!1;if(r.length?(i[u]!==a||r[u][c])&&(h=!0):h=!0,h){if(s)break;r.push({[c]:l}),i.push(a),u++}else r[u][c]=l;l===e&&(s=r[u])}return s!=null?s:{}}function An(t,e,r){var l;let i=Yt(t,e),o=[r.address_line1,r.address_line2,r.address_line3].filter(a=>Boolean(a)).join(", ");ae(i["street-address"],o),ae(i["address-line1"],r.address_line1||""),ae(i["address-level1"],r.address_level1||""),ae(i["address-level2"],r.address_level2||""),ae(i["address-level3"],r.address_level3||"");let s=r.country_code||((l=r.metadata)==null?void 0:l.iso_3166_1)||"";if(i.country&&i.country instanceof HTMLSelectElement){let a=i.country.querySelector("option").value,c=a===a.toUpperCase();ae(i.country,c?s.toUpperCase():s)}else ae(i.country,s);ae(i["country-name"],r.country||""),ae(i["postal-code"],r.postcode||"")}function Li(t,e){let r=Yt(t,e),i={};for(let[o,s]of Object.entries(r))(s==null?void 0:s.value)&&(i[o]=s.value);return i}function lt(t){let e=[];return t["street-address"]?e.push(t["street-address"]):(e.push(t["address-line1"]||""),e.push(t["address-line2"]||""),e.push(t["address-line3"]||"")),e.push(t["address-level3"]||""),e.push(t["address-level2"]||""),e.push(t["address-level1"]||""),e.push(t["postal-code"]||""),t["country-name"]?e.push(t["country-name"]):e.push(t.country||""),e.filter(r=>Boolean(r)).join(", ")}function Wt(t,e){let r=En(e);if(!r)return;let i=Je(t);An(r,e,i);let o=Yt(r,e);o["address-line2"]&&o["address-line2"].focus()}function Ko(t){var i;let e={},r=[t.properties.address_line1,t.properties.address_line2,t.properties.address_line3].filter(o=>Boolean(o)).join(", ");return e["street-address"]=r,e["address-line1"]=t.properties.address_line1,e["address-line2"]=t.properties.address_line2,e["address-line3"]=t.properties.address_line3,e["address-level1"]=t.properties.address_level1,e["address-level2"]=t.properties.address_level2,e["address-level3"]=t.properties.address_level3,e.country=(i=t.properties.metadata)==null?void 0:i.iso_3166_1,e["country-name"]=t.properties.country,e["postal-code"]=t.properties.postcode,e}function Qo(t,e){for(let[r,i]of Object.entries(t))if(e[r]!==i)return!0;return!1}var Ci=t=>t.filter((e,r,i)=>{let o=Ht(e,0);return e.accuracy!=="street"||i.findIndex(s=>o===Ht(s,0))===r}),te=(t,e,r)=>{let s=r?e||"address-line1":"new-password";t&&(t.autocomplete=s)},ki=(t,e,r)=>{if(!t||!r)return;te(t,e,!0);let i={properties:G(x({},r),{address_line1:r.address_line1+" ",postcode:null})};Wt(i,t),te(t,e,!1),t==null||t.focus()};var Ln=Yn(Jo());var es=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Mn=es.join(","),qt=typeof Element=="undefined"?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ts=function(e,r,i){var o=Array.prototype.slice.apply(e.querySelectorAll(Mn));return r&&qt.call(e,Mn)&&o.unshift(e),o=o.filter(i),o},Oa=function(e){return e.contentEditable==="true"},rs=function(e){var r=parseInt(e.getAttribute("tabindex"),10);return isNaN(r)?Oa(e)||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:r},Pa=function(e,r){return e.tabIndex===r.tabIndex?e.documentOrder-r.documentOrder:e.tabIndex-r.tabIndex},Sn=function(e){return e.tagName==="INPUT"},Ba=function(e){return Sn(e)&&e.type==="hidden"},Ha=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return r},_a=function(e,r){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===r)return e[i]},Fa=function(e){if(!e.name)return!0;var r=e.form||e.ownerDocument,i=function(a){return r.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")o=i(window.CSS.escape(e.name));else try{o=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var s=_a(o,e.form);return!s||s===e},Na=function(e){return Sn(e)&&e.type==="radio"},Da=function(e){return Na(e)&&!Fa(e)},ja=function(e,r){if(getComputedStyle(e).visibility==="hidden")return!0;var i=qt.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(qt.call(o,"details:not([open]) *"))return!0;if(!r||r==="full")for(;e;){if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}else if(r==="non-zero-area"){var s=e.getBoundingClientRect(),l=s.width,a=s.height;return l===0&&a===0}return!1},Ua=function(e){if(Sn(e)||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.tagName==="BUTTON")for(var r=e.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var i=0;i<r.children.length;i++){var o=r.children.item(i);if(o.tagName==="LEGEND")return!o.contains(e)}return!0}r=r.parentElement}return!1},Tn=function(e,r){return!(r.disabled||Ba(r)||ja(r,e.displayCheck)||Ha(r)||Ua(r))},is=function(e,r){return!(!Tn(e,r)||Da(r)||rs(r)<0)},ns=function(e,r){r=r||{};var i=[],o=[],s=ts(e,r.includeContainer,is.bind(null,r));s.forEach(function(a,c){var u=rs(a);u===0?i.push(a):o.push({documentOrder:c,tabIndex:u,node:a})});var l=o.sort(Pa).map(function(a){return a.node}).concat(i);return l},os=function(e,r){r=r||{};var i=ts(e,r.includeContainer,Tn.bind(null,r));return i},Vt=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return qt.call(e,Mn)===!1?!1:is(r,e)},$a=es.concat("iframe").join(","),Ii=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return qt.call(e,$a)===!1?!1:Tn(r,e)};function ss(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,i)}return r}function Ga(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ss(Object(r),!0).forEach(function(i){Ya(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ss(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Ya(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var as=function(){var t=[];return{activateTrap:function(r){if(t.length>0){var i=t[t.length-1];i!==r&&i.pause()}var o=t.indexOf(r);o===-1||t.splice(o,1),t.push(r)},deactivateTrap:function(r){var i=t.indexOf(r);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}}(),Wa=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},qa=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},Va=function(e){return e.key==="Tab"||e.keyCode===9},ls=function(e){return setTimeout(e,0)},wn=function(e,r){var i=-1;return e.every(function(o,s){return r(o)?(i=s,!1):!0}),i},Xt=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return typeof e=="function"?e.apply(void 0,i):e},Oi=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},cs=function(e,r){var i=(r==null?void 0:r.document)||document,o=Ga({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},r),s={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,a=function(m,g,A){return m&&m[g]!==void 0?m[g]:o[A||g]},c=function(m){return!!(m&&s.containers.some(function(g){return g.contains(m)}))},u=function(m){var g=o[m];if(typeof g=="function"){for(var A=arguments.length,w=new Array(A>1?A-1:0),k=1;k<A;k++)w[k-1]=arguments[k];g=g.apply(void 0,w)}if(!g){if(g===void 0||g===!1)return g;throw new Error("`".concat(m,"` was specified but was not a node, or did not return a node"))}var B=g;if(typeof g=="string"&&(B=i.querySelector(g),!B))throw new Error("`".concat(m,"` as selector refers to no known node"));return B},h=function(){var m=u("initialFocus");if(m===!1)return!1;if(m===void 0)if(c(i.activeElement))m=i.activeElement;else{var g=s.tabbableGroups[0],A=g&&g.firstTabbableNode;m=A||u("fallbackFocus")}if(!m)throw new Error("Your focus-trap needs to have at least one focusable element");return m},f=function(){if(s.tabbableGroups=s.containers.map(function(m){var g=ns(m),A=os(m);if(g.length>0)return{container:m,firstTabbableNode:g[0],lastTabbableNode:g[g.length-1],nextTabbableNode:function(k){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Te=A.findIndex(function(Z){return Z===k});return B?A.slice(Te+1).find(function(Z){return Vt(Z)}):A.slice(0,Te).reverse().find(function(Z){return Vt(Z)})}}}).filter(function(m){return!!m}),s.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},b=function P(m){if(m!==!1&&m!==i.activeElement){if(!m||!m.focus){P(h());return}m.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=m,Wa(m)&&m.select()}},E=function(m){var g=u("setReturnFocus",m);return g||(g===!1?!1:m)},v=function(m){var g=Oi(m);if(!c(g)){if(Xt(o.clickOutsideDeactivates,m)){l.deactivate({returnFocus:o.returnFocusOnDeactivate&&!Ii(g)});return}Xt(o.allowOutsideClick,m)||m.preventDefault()}},y=function(m){var g=Oi(m),A=c(g);A||g instanceof Document?A&&(s.mostRecentlyFocusedNode=g):(m.stopImmediatePropagation(),b(s.mostRecentlyFocusedNode||h()))},M=function(m){var g=Oi(m);f();var A=null;if(s.tabbableGroups.length>0){var w=wn(s.tabbableGroups,function(Mt){var St=Mt.container;return St.contains(g)}),k=w>=0?s.tabbableGroups[w]:void 0;if(w<0)m.shiftKey?A=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:A=s.tabbableGroups[0].firstTabbableNode;else if(m.shiftKey){var B=wn(s.tabbableGroups,function(Mt){var St=Mt.firstTabbableNode;return g===St});if(B<0&&(k.container===g||Ii(g)&&!Vt(g)&&!k.nextTabbableNode(g,!1))&&(B=w),B>=0){var Te=B===0?s.tabbableGroups.length-1:B-1,Z=s.tabbableGroups[Te];A=Z.lastTabbableNode}}else{var ie=wn(s.tabbableGroups,function(Mt){var St=Mt.lastTabbableNode;return g===St});if(ie<0&&(k.container===g||Ii(g)&&!Vt(g)&&!k.nextTabbableNode(g))&&(ie=w),ie>=0){var Vi=ie===s.tabbableGroups.length-1?0:ie+1,Ms=s.tabbableGroups[Vi];A=Ms.firstTabbableNode}}}else A=u("fallbackFocus");A&&(m.preventDefault(),b(A))},T=function(m){if(qa(m)&&Xt(o.escapeDeactivates,m)!==!1){m.preventDefault(),l.deactivate();return}if(Va(m)){M(m);return}},j=function(m){if(!Xt(o.clickOutsideDeactivates,m)){var g=Oi(m);c(g)||Xt(o.allowOutsideClick,m)||(m.preventDefault(),m.stopImmediatePropagation())}},O=function(){if(!!s.active)return as.activateTrap(l),s.delayInitialFocusTimer=o.delayInitialFocus?ls(function(){b(h())}):b(h()),i.addEventListener("focusin",y,!0),i.addEventListener("mousedown",v,{capture:!0,passive:!1}),i.addEventListener("touchstart",v,{capture:!0,passive:!1}),i.addEventListener("click",j,{capture:!0,passive:!1}),i.addEventListener("keydown",T,{capture:!0,passive:!1}),l},Oe=function(){if(!!s.active)return i.removeEventListener("focusin",y,!0),i.removeEventListener("mousedown",v,!0),i.removeEventListener("touchstart",v,!0),i.removeEventListener("click",j,!0),i.removeEventListener("keydown",T,!0),l};return l={activate:function(m){if(s.active)return this;var g=a(m,"onActivate"),A=a(m,"onPostActivate"),w=a(m,"checkCanFocusTrap");w||f(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=i.activeElement,g&&g();var k=function(){w&&f(),O(),A&&A()};return w?(w(s.containers.concat()).then(k,k),this):(k(),this)},deactivate:function(m){if(!s.active)return this;clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,Oe(),s.active=!1,s.paused=!1,as.deactivateTrap(l);var g=a(m,"onDeactivate"),A=a(m,"onPostDeactivate"),w=a(m,"checkCanReturnFocus");g&&g();var k=a(m,"returnFocus","returnFocusOnDeactivate"),B=function(){ls(function(){k&&b(E(s.nodeFocusedBeforeActivation)),A&&A()})};return k&&w?(w(E(s.nodeFocusedBeforeActivation)).then(B,B),this):(B(),this)},pause:function(){return s.paused||!s.active?this:(s.paused=!0,Oe(),this)},unpause:function(){return!s.paused||!s.active?this:(s.paused=!1,f(),O(),this)},updateContainerElements:function(m){var g=[].concat(m).filter(Boolean);return s.containers=g.map(function(A){return typeof A=="string"?i.querySelector(A):A}),s.active&&f(),this}},l.updateContainerElements(e),l};var ds=class{constructor(){this.feedbackEnabled=!0;this.autofillSessionToken=new J;this.autofillSessionEnabled=!1;this.detectBrowserAutofillEnabled=!1}},I=new ds;Object.defineProperty(I,"autofillSessionToken",{configurable:!1,writable:!1});var Xa=N(`
<template>
  <div class="MapboxAddressConfirmation" aria-hidden="true">
    <mapbox-address-confirmation-feature class="ContentFeature"></mapbox-address-confirmation-feature>
    <mapbox-address-confirmation-no-feature class="ContentNoFeature"></mapbox-address-confirmation-no-feature>
  </div>
</template>
`),zt,K,Ue,Kt,$e=class extends q{constructor(){super(...arguments);d(this,zt,!1);d(this,K,void 0);d(this,Ue,void 0);d(this,Kt,{})}get template(){return Xa}get templateStyle(){return ee}get templateUserStyle(){return U(".MapboxAddressConfirmation",this.theme)}get theme(){return n(this,Kt)}set theme(e){if(p(this,Kt,e),!n(this,K)||!e)return;this.updateTemplateUserStyle(U(".MapboxAddressConfirmation",e));let{ContentFeature:r,ContentNoFeature:i}=n(this,K);r.theme=e,i.theme=e}connectedCallback(){super.connectedCallback(),p(this,K,se(this,{MapboxAddressConfirmation:".MapboxAddressConfirmation",ContentFeature:".ContentFeature",ContentNoFeature:".ContentNoFeature"}));let{MapboxAddressConfirmation:e}=n(this,K);e.setAttribute("aria-hidden","true");let r=this.theme;if(r){let{ContentFeature:i,ContentNoFeature:o}=n(this,K);i.theme=r,o.theme=r}}disconnectedCallback(){p(this,Ue,null)}hide(){var r;if(p(this,zt,!1),!n(this,K))return;let{MapboxAddressConfirmation:e}=n(this,K);e.setAttribute("aria-hidden","true"),(r=n(this,Ue))==null||r.deactivate(),Ln.default.off()}show(e,r,i){return F(this,null,function*(){var b;if(!n(this,K))return{type:"cancel"};let{MapboxAddressConfirmation:o,ContentFeature:s,ContentNoFeature:l}=n(this,K),{accessToken:a,minimap:c=!1,theme:u,footer:h}=r;this.theme=u,i?(s.removeAttribute("aria-hidden"),l.setAttribute("aria-hidden","true"),s.minimap=c,s.accessToken=a,s.footer=h,s.update(i,e)):(s.setAttribute("aria-hidden","true"),l.removeAttribute("aria-hidden"),l.update(e)),p(this,zt,!0),o.removeAttribute("aria-hidden"),Ln.default.on();let f=i?s:l;return p(this,Ue,cs(o,{fallbackFocus:f,escapeDeactivates:()=>(this.hide(),!0)})),(b=n(this,Ue))==null||b.activate(),new Promise(E=>{let v=f,y=M=>{v.removeEventListener("result",y);let T=M.detail;this.hide(),E(T==="change"?{type:"change",feature:i}:{type:T})};v.addEventListener("result",y)})})}tryShow(e,r){return F(this,null,function*(){if(!n(this,K))return{type:"cancel"};let{accessToken:i,options:o={}}=r,s=new sn(x({accessToken:i},o)),l=lt(e),c=(yield s.validate(l,{sessionToken:I.autofillSessionToken})).features[0];if(c){let u=f=>f.properties.match_code.confidence===an.exact,{skipConfirmModal:h=u}=r;if(h(c))return{type:"nochange"}}return yield this.show(e,r,c)})}};zt=new WeakMap,K=new WeakMap,Ue=new WeakMap,Kt=new WeakMap;window.MapboxAddressConfirmation=$e;window.customElements.get("mapbox-address-confirmation")||customElements.define("mapbox-address-confirmation",$e);var Cn=new $e;function Pi(r){return F(this,arguments,function*(t,e={}){let{sections:i=[]}=e;Cn.parentNode||document.body.appendChild(Cn);let o={type:"nochange"},s=$t(t),l=Gt(t),a=Array.from(document.querySelectorAll("mapbox-search-listbox"));for(let c of s){if(i.length){let v=l.find(y=>y.input===c);if(!v||!i.includes(v.section))continue}let u=Li(t,c),h=a.find(v=>v.input===c),f=h==null?void 0:h.autofillHost;if(f){let v=f.retrieveFeature;if(v){let y=Ko(v);if(!Qo(u,y))continue}}let b=e.accessToken||I.accessToken,E=yield Cn.tryShow(u,G(x({},e),{accessToken:b}));if(E.type==="change")if(h)f.simulateRetrieve(E.feature);else{c.dataset.mapboxSuccess="true";let v=Je(E.feature);An(t,c,v)}E.type==="change"&&o.type!=="cancel"&&(o=E),E.type==="cancel"&&(o=E)}return o})}function Bi(t,e){if(e){let r=N(`
        <span>
          <span></span>
          <br />
          <span></span>
        </span>
      `),[i,o]=Array.from(r.querySelectorAll("span > span")),s=e.split(",");if(i.textContent=s[0].trim(),o.textContent=s.slice(1).join(",").trim(),t["address-line2"]){let l=document.createElement("span");l.textContent=t["address-line2"],r.insertBefore(l,o),r.insertBefore(document.createElement("br"),o)}if(t["address-line3"]){let l=document.createElement("span");l.textContent=t["address-line3"],r.insertBefore(l,o),r.insertBefore(document.createElement("br"),o)}return r}else{let r=t["street-address"]||t["address-line1"]||"",i=t["address-line2"],o=t["address-line3"],s=[t["address-level4"]||"",t["address-level3"]||"",t["address-level2"]||"",`${t["address-level1"]||""} ${t["postal-code"]||""}`,t.country||t["country-name"]||""].filter(Boolean).join(", "),a=[r,i,o,s].filter(Boolean).map(u=>`<span>${u}</span>`).join("<br />");return N(`
        <span>${a}</span>
      `)}}function Hi(t,e,r,i){return F(this,null,function*(){if(!r)return;let o=En(t),s=Object.values(Yt(o,t));if(!e.detail.elements.some(b=>s.includes(b)))return;let l=Gt(o),c=l.find(b=>b.input===t).section,u=Array.from(new Set(l.filter(b=>e.detail.elements.includes(b.input)).map(b=>b.section)));if(!u.includes(c))return;let h=typeof r=="object"&&r.sections||[];if(h.length&&!h.some(b=>u.includes(b)))return;let f=typeof r=="object"?r:{};f=G(x({},f),{accessToken:i,sections:[c]}),yield Pi(o,f)})}var za="https://contribute-api.mapbox.com/v1",Ka="https://contribute-api-staging.tilestream.net/v1",Qa="edit-suggestion";function _i(t,e){if(!I.feedbackEnabled)return;let r=window.location.hostname,o=`${mo(r)||go(r)?Ka:za}/${Qa}/address?access_token=${t}`,{originalCoordinate:s,originalAddress:l,changes:a}=e,c={action:"update",reason:"incorrect_address",location:{longitude:s[0],latitude:s[1]},userEmail:"no-reply-autofill@mapbox.com",changes:a,placeName:l};fetch(o,{method:"POST",headers:new Headers({"User-Agent":`mapbox-search-js.${Rt}.${navigator.userAgent}`,"Content-Type":"application/json"}),body:JSON.stringify(c)})}var Za=N(`
<template>
  <div class="MapboxAddressConfirmationFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Did you mean?</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>

      <div class="ModalAddress ModalAddressApprove"></div>
            
      <div class="ModalMap">
        <mapbox-address-minimap class="Minimap"></mapbox-address-minimap>
      </div>

      <div
        class="Button ButtonPrimary ButtonApprove"
        tabindex="0"
        role="button"
        aria-label="Yes"
      >
        Yes
      </div>
      
      <div
        class="Button ButtonSecondary ButtonReject"
        tabindex="0"
        role="button"
        aria-label="No, use the address I provided"
      >
        No, use the address I provided
      </div>

      <div class="ModalFooter">
          Your confirmation helps improve address data accuracy.
      </div>
    </div>
  </div>
</template>
`),pe,Qt,ct,Zt,Jt,er,tr,rr,kn=class extends q{constructor(){super(...arguments);d(this,pe,void 0);d(this,Qt,{});this.minimap=!1;d(this,ct,void 0);d(this,Zt,void 0);this.update=(e,r)=>{p(this,ct,e),p(this,Zt,r);let{ModalMap:i,Minimap:o,ModalAddressApprove:s}=n(this,pe);if(this.minimap){if(i.removeAttribute("aria-hidden"),o.accessToken=this.accessToken,typeof this.minimap=="object"){let{defaultMapStyle:a,theme:c,mapStyleMode:u,satelliteToggle:h}=this.minimap;a&&(o.defaultMapStyle=this.minimap.defaultMapStyle),c&&(o.theme=this.minimap.theme),u&&(o.mapStyleMode=u),h!==void 0&&(o.satelliteToggle=h)}o.feature=e}else i.setAttribute("aria-hidden","true");let l=e.properties.place_name||e.properties.full_address||e.properties.address;s.innerHTML="",s.appendChild(Bi(r,l))};d(this,Jt,()=>{this.dispatchEvent(new S("result","cancel"))});this.approve=()=>{this.dispatchEvent(new S("result","change"))};this.reject=()=>{this.dispatchEvent(new S("result","nochange")),_i(this.accessToken,{originalCoordinate:n(this,ct).geometry.coordinates,originalAddress:n(this,ct).properties.full_address,changes:{address:lt(n(this,Zt))}})};d(this,er,ue());d(this,tr,ue());d(this,rr,ue())}get template(){return Za}get templateStyle(){return ee}get templateUserStyle(){return U(".MapboxAddressConfirmationFeature",this.theme)}get theme(){return n(this,Qt)}set theme(e){if(p(this,Qt,e),!n(this,pe)||!e)return;this.updateTemplateUserStyle(U(".MapboxAddressConfirmationFeature",e));let{IconQuestion:r,IconClose:i}=n(this,pe);r.innerHTML=X("question",e),i.innerHTML=X("close",e)}set footer(e){if(e===void 0)return;let r=this.querySelector(".ModalFooter");typeof e=="string"?(r.textContent=e,r.removeAttribute("aria-hidden")):e?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),p(this,pe,se(this,{MapboxAddressConfirmationFeature:".MapboxAddressConfirmationFeature",Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",ModalMap:".ModalMap",Minimap:".Minimap",IconQuestion:".IconQuestion",IconClose:".IconClose",ButtonApprove:".ButtonApprove",ButtonReject:".ButtonReject",ModalAddressApprove:".ModalAddressApprove"}));let{Modal:e,ModalHeaderTitle:r,IconClose:i,ButtonApprove:o,ButtonReject:s,ModalAddressApprove:l}=n(this,pe);e.setAttribute("aria-labelledby",n(this,tr)),e.setAttribute("aria-describedby",n(this,rr)),i.setAttribute("aria-controls",n(this,er)),e.id=n(this,er),r.id=n(this,tr),l.id=n(this,rr);let a=Array.from(this.querySelectorAll('[role="button"]'));for(let u of a)u.addEventListener("keydown",Si);i.addEventListener("click",n(this,Jt)),o.addEventListener("click",this.approve),s.addEventListener("click",this.reject);let c=this.theme;if(c){let{IconQuestion:u,IconClose:h}=n(this,pe);u.innerHTML=X("question",c),h.innerHTML=X("close",c)}}disconnectedCallback(){let{IconClose:e,ButtonApprove:r}=n(this,pe);e.removeEventListener("click",n(this,Jt)),r.removeEventListener("click",this.approve)}};pe=new WeakMap,Qt=new WeakMap,ct=new WeakMap,Zt=new WeakMap,Jt=new WeakMap,er=new WeakMap,tr=new WeakMap,rr=new WeakMap;window.MapboxAddressConfirmationFeature=kn;window.customElements.get("mapbox-address-confirmation-feature")||customElements.define("mapbox-address-confirmation-feature",kn);var Ja=N(`
<template>
  <div class="MapboxAddressConfirmationNoFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Confirm address</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>
      <div class="ModalDescription">
        We couldn't verify this address. Please check that your information is correct before continuing.
      </div>
      <br />
      <div class="ModalSubheader">
        You entered
      </div>
      <div class="ModalAddress"></div>
      <div
        class="Button ButtonPrimary"
        tabindex="0"
        role="button"
        aria-label="Use the address I provided"
      >
        Use the address I provided
      </div>
    </div>
  </div>
</template>
`),fe,ir,nr,or,sr,ar,Rn=class extends q{constructor(){super(...arguments);d(this,fe,void 0);d(this,ir,{});this.update=e=>{let{ModalAddress:r}=n(this,fe);r.innerHTML="",r.appendChild(Bi(e))};d(this,nr,()=>{this.dispatchEvent(new S("result","cancel"))});this.reject=()=>{this.dispatchEvent(new S("result","nochange"))};d(this,or,ue());d(this,sr,ue());d(this,ar,ue())}get template(){return Ja}get templateStyle(){return ee}get templateUserStyle(){return U(".MapboxAddressConfirmationNoFeature",this.theme)}get theme(){return n(this,ir)}set theme(e){if(p(this,ir,e),!n(this,fe)||!e)return;this.updateTemplateUserStyle(U(".MapboxAddressConfirmationNoFeature",e));let{IconQuestion:r,IconClose:i}=n(this,fe);r.innerHTML=X("question",e),i.innerHTML=X("close",e)}connectedCallback(){super.connectedCallback(),p(this,fe,se(this,{Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",IconQuestion:".IconQuestion",IconClose:".IconClose",ModalAddress:".ModalAddress",ButtonReject:".Button"}));let{Modal:e,ModalHeaderTitle:r,IconClose:i,ModalAddress:o,ButtonReject:s}=n(this,fe);e.setAttribute("aria-labelledby",n(this,sr)),e.setAttribute("aria-describedby",n(this,ar)),i.setAttribute("aria-controls",n(this,or)),e.id=n(this,or),r.id=n(this,sr),o.id=n(this,ar);let l=Array.from(this.querySelectorAll('[role="button"]'));for(let c of l)c.addEventListener("keydown",Si);i.addEventListener("click",n(this,nr)),s.addEventListener("click",this.reject);let a=this.theme;if(a){let{IconQuestion:c,IconClose:u}=n(this,fe);c.innerHTML=X("question",a),u.innerHTML=X("close",a)}}disconnectedCallback(){let{IconClose:e,ButtonReject:r}=n(this,fe);e.removeEventListener("click",n(this,nr)),r.removeEventListener("click",this.reject)}};fe=new WeakMap,ir=new WeakMap,nr=new WeakMap,or=new WeakMap,sr=new WeakMap,ar=new WeakMap;window.MapboxAddressConfirmationNoFeature=Rn;window.customElements.get("mapbox-address-confirmation-no-feature")||customElements.define("mapbox-address-confirmation-no-feature",Rn);var us='input:-webkit-autofill,select:-webkit-autofill,textarea:-webkit-autofill{animation-name:onbrowserautofillstart}input:not(:-webkit-autofill),select:not(:-webkit-autofill),textarea:not(:-webkit-autofill){animation-name:onbrowserautofillcancel}@keyframes onbrowserautofillstart{0%{animation-name:"onbrowserautofillstart"}to{animation-name:"onbrowserautofillstart"}}@keyframes onbrowserautofillcancel{0%{animation-name:"onbrowserautofillcancel"}to{animation-name:"onbrowserautofillcancel"}}';var Fi="browser-autofilled",In=[];function tl(){window.dispatchEvent(new window.CustomEvent("browserautofill",{bubbles:!0,cancelable:!0,detail:{elements:In}})),In=[]}var rl=cn(tl,5);function hs(t){t.hasAttribute(Fi)||(t.setAttribute(Fi,""),In.push(t),rl())}function ps(t){!t.hasAttribute(Fi)||t.removeAttribute(Fi)}function il(t){t.animationName==="onbrowserautofillstart"?hs(t.target):ps(t.target)}function nl(t){let e=t.target;e.nodeName.toLowerCase()!=="select"&&!t.simulated&&!(t instanceof S)&&(t.inputType==="insertReplacementText"||!("data"in t))?hs(e):ps(e)}function Ni(){I.detectBrowserAutofillEnabled||(I.detectBrowserAutofillEnabled=!0,zn(us),document.addEventListener("animationstart",il,!0),document.addEventListener("input",nl,!0))}var Ge,Q,V,L,Ee,dt,lr,cr,ut,dr,ur,hr,pr,fr,mr,gr,ht=class extends q{constructor(){super(...arguments);d(this,Ge,new kt);d(this,Q,new Ze(n(this,Ge)));d(this,V,void 0);d(this,L,new xe);d(this,Ee,void 0);this.options={};this.confirmOnBrowserAutofill=!1;d(this,dt,!1);d(this,lr,e=>{let r=(e==null?void 0:e.suggestions)?Ci(e.suggestions):null;n(this,L).handleSuggest(r),this.dispatchEvent(new S("suggest",e))});d(this,cr,e=>{n(this,L).handleError(),this.dispatchEvent(new S("suggesterror",e))});d(this,ut,e=>{var i;if(this.dispatchEvent(new S("retrieve",e)),this.retrieveFeature=(i=e.features)==null?void 0:i[0],!n(this,V))return;let r=e;!r||!r.features||!r.features.length||Wt(r.features[0],n(this,V))});d(this,dr,()=>{var e;try{let r=(e=this.querySelector("input"))!=null?e:null;p(this,V,r),n(this,L).input=r}catch(r){p(this,V,null),n(this,L).input=null,console.error(r.message||r)}});d(this,ur,new MutationObserver(n(this,dr)));d(this,hr,e=>{n(this,L).blur(),Hi(n(this,V),e,this.confirmOnBrowserAutofill,this.accessToken)});this.retrieveFeature=null;this.interceptSearch=null;d(this,pr,e=>{this.dispatchEvent(e.clone());let r=e.detail,i=this.browserAutofillEnabled===!0&&(r==null?void 0:r.length)<=2;te(n(this,V),n(this,Ee),i);let o=this.interceptSearch&&this.interceptSearch(r),s=this.interceptSearch?o:r;if(this.interceptSearch&&!o||(s==null?void 0:s.length)<=2){n(this,L).handleSuggest(null);return}n(this,Q).suggest(s,this.options)});d(this,fr,e=>{let r=e.detail;e.detail.accuracy!=="street"?(te(n(this,V),n(this,Ee),!0),n(this,Q).retrieve(r,this.options)):ki(n(this,V),n(this,Ee),r)});d(this,mr,()=>{te(n(this,V),n(this,Ee),!0),n(this,Q).abort()});d(this,gr,()=>{var r;let e=this.browserAutofillEnabled===!0&&((r=n(this,V).value)==null?void 0:r.length)<=2;te(n(this,V),n(this,Ee),e)})}get accessToken(){return n(this,Ge).accessToken}set accessToken(e){n(this,Ge).accessToken=e}get input(){return n(this,V)}get theme(){return n(this,L).theme}set theme(e){n(this,L).theme=e}get popoverOptions(){return n(this,L).popoverOptions}set popoverOptions(e){n(this,L).popoverOptions=e}get browserAutofillEnabled(){return n(this,dt)}set browserAutofillEnabled(e){p(this,dt,e)}connectedCallback(){var r;super.connectedCallback(),I.autofillSessionEnabled=!0,n(this,Q).sessionToken=I.autofillSessionToken,n(this,L).autofillHost=this,n(this,L).searchService=0,n(this,L).addEventListener("input",n(this,pr)),n(this,L).addEventListener("select",n(this,fr)),n(this,L).addEventListener("blur",n(this,mr)),n(this,L).addEventListener("focus",n(this,gr)),n(this,Q).addEventListener("suggest",n(this,lr)),n(this,Q).addEventListener("suggesterror",n(this,cr)),n(this,Q).addEventListener("retrieve",n(this,ut)),document.body.appendChild(n(this,L));let e=(r=this.querySelector("input"))!=null?r:null;e&&(e.insertAdjacentElement("beforebegin",rt()),Ti(e),p(this,Ee,e.autocomplete)),n(this,ur).observe(this,{subtree:!0,childList:!0}),n(this,dr).call(this),Ni(),window.addEventListener("browserautofill",n(this,hr))}disconnectedCallback(){n(this,L).remove(),n(this,L).removeEventListener("input",n(this,pr)),n(this,L).removeEventListener("select",n(this,fr)),n(this,L).removeEventListener("blur",n(this,mr)),n(this,L).removeEventListener("focus",n(this,gr)),n(this,Q).removeEventListener("suggest",n(this,lr)),n(this,Q).removeEventListener("suggesterror",n(this,cr)),n(this,Q).removeEventListener("retrieve",n(this,ut)),n(this,ur).disconnect(),window.removeEventListener("browserautofill",n(this,hr))}attributeChangedCallback(e,r,i){if(e==="access-token"){n(this,Ge).accessToken=i;return}if(e==="browser-autofill-enabled"){p(this,dt,Boolean(i));return}if(e==="theme"){this.theme=et(i);return}if(e==="popover-options"){this.popoverOptions=et(i);return}let o=e.split("-").join("_");i||delete this.options[o],this.options[o]=i}focus(){n(this,L).focus()}simulateRetrieve(e){let r=this.input;r&&(r.dataset.mapboxSuccess="true"),n(this,L).hideResults();let i={type:"FeatureCollection",features:[e],url:""};n(this,ut).call(this,i)}};Ge=new WeakMap,Q=new WeakMap,V=new WeakMap,L=new WeakMap,Ee=new WeakMap,dt=new WeakMap,lr=new WeakMap,cr=new WeakMap,ut=new WeakMap,dr=new WeakMap,ur=new WeakMap,hr=new WeakMap,pr=new WeakMap,fr=new WeakMap,mr=new WeakMap,gr=new WeakMap,ht.observedAttributes=["access-token","browser-autofill-enabled","theme","popover-options","css-text","language","country","bbox","limit","proximity"];window.MapboxAddressAutofill=ht;window.customElements.get("mapbox-address-autofill")||customElements.define("mapbox-address-autofill",ht);var ol=9,sl=N(`
<template>
  <input class="Input" type="text" />
</template>
`),Ye,re,Re,Ae,R,vr,br,yr,xr,Er,Ar,Mr,pt=class extends q{constructor(){super(...arguments);d(this,Ye,new on({}));d(this,re,new Ze(n(this,Ye)));d(this,Re,null);d(this,Ae,void 0);d(this,R,new xe);this.options={};d(this,vr,e=>{n(this,R).handleSuggest((e==null?void 0:e.suggestions)||null),this.dispatchEvent(new S("suggest",e))});d(this,br,e=>{n(this,R).handleError(),this.dispatchEvent(new S("suggesterror",e))});d(this,yr,e=>{this.dispatchEvent(new S("retrieve",e));let r=e;if(!r||!r.features.length)return;let i=Je(r.features[0]);n(this,Ae).value=i.name;let o=n(this,Re);if(!o)return;let s=r.features[0];if(!s)return;let l=s.properties.feature_type,a=s.properties.bbox;if(a)o.flyTo(ao(o,de.convert(a).toFlatArray()));else{let c=s.geometry.coordinates,u=lo(l);o.flyTo({center:c,zoom:u,speed:dn})}});this.interceptSearch=null;d(this,xr,e=>{this.dispatchEvent(e.clone());let r=e.detail,i=this.interceptSearch&&this.interceptSearch(r),o=this.interceptSearch?i:r;if(this.interceptSearch&&!i){n(this,R).hideResults();return}n(this,re).suggest(o,this.options)});d(this,Er,e=>{let r=e.detail;n(this,re).retrieve(r,this.options)});d(this,Ar,()=>{n(this,re).abort()});d(this,Mr,()=>{let e=n(this,Re),r=x({},this.options);if(e.getZoom()<=ol){delete r.proximity,this.options=r;return}let i=e.getCenter();this.options=G(x({},r),{proximity:i})})}get accessToken(){return n(this,Ye).accessToken}set accessToken(e){n(this,Ye).accessToken=e}get value(){return n(this,Ae).value}set value(e){n(this,Ae).value=e}get input(){return n(this,Ae)}get template(){return sl}get templateStyle(){return ee}get templateUserStyle(){return U(".Input",n(this,R).theme)}get theme(){return n(this,R).theme}set theme(e){n(this,R).theme=e,!!n(this,Ae)&&(this.updateTemplateUserStyle(U(".Input",e)),n(this,R).updatePopover())}get popoverOptions(){return n(this,R).popoverOptions}set popoverOptions(e){n(this,R).popoverOptions=e}connectedCallback(){super.connectedCallback();let e=this.querySelector(".Input");p(this,Ae,e),n(this,R).input=e,n(this,R).searchService=3,n(this,R).addEventListener("input",n(this,xr)),n(this,R).addEventListener("select",n(this,Er)),n(this,R).addEventListener("blur",n(this,Ar)),n(this,re).addEventListener("suggest",n(this,vr)),n(this,re).addEventListener("suggesterror",n(this,br)),n(this,re).addEventListener("retrieve",n(this,yr)),document.body.appendChild(n(this,R)),e&&e.insertAdjacentElement("beforebegin",rt())}disconnectedCallback(){n(this,R).remove(),n(this,R).input=null,n(this,R).removeEventListener("input",n(this,xr)),n(this,R).removeEventListener("select",n(this,Er)),n(this,R).removeEventListener("blur",n(this,Ar)),n(this,re).removeEventListener("suggest",n(this,vr)),n(this,re).removeEventListener("suggesterror",n(this,br)),n(this,re).removeEventListener("retrieve",n(this,yr))}attributeChangedCallback(e,r,i){if(e==="access-token"){n(this,Ye).accessToken=i;return}if(e==="theme"){this.theme=et(i);return}if(e==="popover-options"){this.popoverOptions=et(i);return}let o=e.split("-").join("_");i||delete this.options[o],this.options[o]=i}focus(){n(this,R).focus()}bindMap(e){n(this,Re)&&n(this,Re).off("moveend",n(this,Mr)),e&&e.on("moveend",n(this,Mr)),p(this,Re,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let r=document.createElement("div");return r.className="mapboxgl-ctrl",r.style.width="300px",r.appendChild(this),r}onRemove(){this.remove(),this.unbindMap()}getDefaultPosition(){return"top-right"}};Ye=new WeakMap,re=new WeakMap,Re=new WeakMap,Ae=new WeakMap,R=new WeakMap,vr=new WeakMap,br=new WeakMap,yr=new WeakMap,xr=new WeakMap,Er=new WeakMap,Ar=new WeakMap,Mr=new WeakMap,pt.observedAttributes=["access-token","theme","popover-options","language","country","bbox","limit","navigation-profile","origin","proximity","eta-type","types"];window.MapboxSearchBox=pt;window.customElements.get("mapbox-search-box")||customElements.define("mapbox-search-box",pt);var vs=Yn(fs());var ms=new vs.default({size:512,antimeridian:!0}),Ve=1280;function gs(t,e){let{width:r,height:i}=ci(t,!0);switch(e){case"center":return[0,0];case"top":return[0,i/2];case"bottom":return[0,-1*i/2];case"left":return[r/2,0];case"right":return[-1*r/2,0];case"top-left":return[r/2,i/2];case"top-right":return[-1*r/2,i/2];case"bottom-left":return[r/2,-1*i/2];case"bottom-right":return[-1*r/2,-1*i/2]}}var Sr,Di,We,Tr,wr,ji,Lr,Cr,Ui,kr,Rr,qe,$i,Ir,Bn=class{constructor(e,r,i,o,s,l){d(this,Sr,void 0);d(this,Di,()=>{[this.anchorOffsetX,this.anchorOffsetY]=gs(this.markerElement,this.anchor),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}});d(this,We,{anchorX:0,anchorY:0,globalX:0,globalY:0,correctionX:0,correctionY:0});d(this,Tr,!1);d(this,wr,void 0);d(this,ji,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),n(this,qe).call(this,e),window.addEventListener("pointermove",n(this,Cr)),window.addEventListener("pointerup",n(this,Lr)))});d(this,Lr,()=>{window.removeEventListener("pointermove",n(this,Cr)),window.removeEventListener("pointerup",n(this,Lr))});d(this,Cr,e=>{e.preventDefault(),e.stopPropagation();let r=this.curPointerXPos-e.pageX,i=this.curPointerYPos-e.pageY;this.markerDeltaX+=r,this.markerDeltaY-=i,this.markerDeltaX=Math.max(Math.min(this.imgElement.width/2,this.markerDeltaX),this.imgElement.width/2*-1),this.markerDeltaY=Math.max(Math.min(this.imgElement.height/2,this.markerDeltaY),this.imgElement.height/2*-1);let o=this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],s=this.imgCenterPx[1]-this.imgCenterAdjustedPx[1],l=this.markerDeltaX-o,a=this.markerDeltaY+s;this.markerTransform={globalX:l,globalY:a},n(this,qe).call(this,e)});d(this,Ui,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),n(this,qe).call(this,e),window.addEventListener("pointermove",n(this,Rr)),window.addEventListener("pointerup",n(this,kr)))});d(this,kr,()=>{window.removeEventListener("pointermove",n(this,Rr)),window.removeEventListener("pointerup",n(this,kr))});d(this,Rr,e=>{e.preventDefault();let r=Math.round(this.imgContainerElement.scrollTop+(this.curPointerYPos-e.pageY));r=Math.max(Math.min(this.imgElement.height-this.imgContainerElement.clientHeight,r),0);let i=Math.round(this.imgContainerElement.scrollLeft+(this.curPointerXPos-e.pageX));i=Math.max(Math.min(this.imgElement.width-this.imgContainerElement.clientWidth,i),0),this.imgContainerElement.scrollTop=r,this.imgContainerElement.scrollLeft=i;let o=Math.round(i-(this.imgElement.width-this.imgContainerElement.clientWidth)/2),s=Math.round((this.imgElement.height-this.imgContainerElement.clientHeight)/2-r);if(this.imgCenterAdjustedPx=[this.imgCenterPx[0]+o,this.imgCenterPx[1]-s],!this.keepMarkerCentered){let l=this.markerDeltaX+o,a=this.markerDeltaY+s;this.markerTransform={globalX:l,globalY:a}}n(this,Ir).call(this,i,r),n(this,qe).call(this,e)});d(this,qe,e=>{this.curPointerXPos=e.pageX,this.curPointerYPos=e.pageY});d(this,$i,()=>{let{anchorX:e,anchorY:r,globalX:i,globalY:o,correctionX:s,correctionY:l}=n(this,We),a=e-i+s,c=r+o+l;this.markerElement.style.transform=`translate(calc(-50% + ${a}px), calc(-50% + ${c}px))`});this.reCenter=()=>{let e=(this.imgElement.height-this.imgContainerElement.clientHeight)/2,r=(this.imgElement.width-this.imgContainerElement.clientWidth)/2;this.imgContainerElement.scrollTop=e,this.imgContainerElement.scrollLeft=r,this.imgCenterAdjustedPx=this.imgCenterPx,this.markerDeltaX=this.markerDeltaY=0,this.markerTransform={globalX:0,globalY:0,correctionX:0,correctionY:0}};this.handleMinimapResize=()=>{if(!this.imgElement.height||!this.imgElement.width)return;let e=this.imgCenterOffset.x,r=this.imgCenterOffset.y,i=this.imgElement.width/2-e-this.imgContainerElement.clientWidth/2,o=this.imgElement.height/2-r-this.imgContainerElement.clientHeight/2;this.imgContainerElement.scrollLeft=i,this.imgContainerElement.scrollTop=o,n(this,Ir).call(this,i,o)};d(this,Ir,(e,r)=>{let i=this.imgCenterOffset.x,o=this.imgCenterOffset.y,{correctionX:s,correctionY:l}=this.markerTransform,a={};if(e/2<i*-1){let c=i*-1-e/2;a.correctionX=c*2}else e<0?a.correctionX=e:s!==0&&(a.correctionX=0);if(r/2<o*-1){let c=o*-1-r/2;a.correctionY=c*2}else r<0?a.correctionY=r:l!==0&&(a.correctionY=0);this.markerTransform=a});this.markerElement=i,this.imgContainerElement=e,this.imgElement=r,this.keepMarkerCentered=o,this.zoom=s,this.anchor=l,this.curPointerXPos=0,this.curPointerYPos=0,this.markerDeltaX=0,this.markerDeltaY=0,this.imgContainerElement.addEventListener("pointerdown",n(this,Ui)),this.keepMarkerCentered||this.markerElement.addEventListener("pointerdown",n(this,ji)),new ResizeObserver(n(this,Di)).observe(this.markerElement)}get anchor(){return n(this,Sr)}set anchor(e){p(this,Sr,e),[this.anchorOffsetX,this.anchorOffsetY]=gs(this.markerElement,e),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}}get markerTransform(){return n(this,We)}set markerTransform(e){p(this,We,x(x({},n(this,We)),e)),n(this,$i).call(this)}get isActive(){return n(this,Tr)}set isActive(e){this.imgContainerElement.style.touchAction=e?"none":"",p(this,Tr,e)}get coordinate(){let e=this.keepMarkerCentered?this.imgCenterAdjustedPx:[this.imgCenterPx[0]-this.markerDeltaX,this.imgCenterPx[1]+this.markerDeltaY];if(_e(e,this.imgCenterPx))return n(this,wr);{let r=ms.ll(e,this.zoom);return[un(r[0],6),un(r[1],6)]}}set coordinate(e){p(this,wr,e),this.imgCenterPx=this.imgCenterAdjustedPx=ms.px(e,this.zoom)}get imgCenterOffset(){return{x:this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],y:this.imgCenterPx[1]-this.imgCenterAdjustedPx[1]}}};Sr=new WeakMap,Di=new WeakMap,We=new WeakMap,Tr=new WeakMap,wr=new WeakMap,ji=new WeakMap,Lr=new WeakMap,Cr=new WeakMap,Ui=new WeakMap,kr=new WeakMap,Rr=new WeakMap,qe=new WeakMap,$i=new WeakMap,Ir=new WeakMap;var bs='<svg width="88" height="23" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-rule="evenodd"><defs><path id="g" d="M11.5 2.25a9.25 9.25 0 1 1 0 18.5 9.25 9.25 0 0 1 0-18.5zM7 15.98c-.05-.33-.83-5.8 2.23-8.87a4.4 4.4 0 0 1 3.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39a4.4 4.4 0 0 1-1.28 3.13C12.72 16.93 7 16 7 16v-.02zm8.3-5.48-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z"/><path id="b" d="M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19A3.77 3.77 0 0 1 50.86 15v3.77c0 .13-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01.01-.01c.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V15a3.7 3.7 0 0 1-2.73 1.19c-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.38-.19a4.24 4.24 0 0 0-4.16 3.29 4.07 4.07 0 0 0 0 1.77 4.23 4.23 0 0 0 4.17 3.3 4.22 4.22 0 0 0 4.26-4.19 4.2 4.2 0 0 0-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18a4 4 0 0 1 3.84 3.28c.13.59.13 1.2 0 1.8a4 4 0 0 1-3.84 3.29A3.77 3.77 0 0 1 60.86 15v.77c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4a.23.23 0 0 1-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55a2.73 2.73 0 0 1 2.44-1.56c1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.62 0h-1.61a.27.27 0 0 1-.12-.03c-.1-.06-.13-.19-.06-.28l2.43-3.71-2.4-3.65a.21.21 0 0 1-.02-.12.2.2 0 0 1 .2-.21h1.61c.13 0 .24.06.3.17L82 10.54l1.4-2.37a.34.34 0 0 1 .3-.17h1.6l.12.03c.1.06.13.19.06.28l-2.37 3.65 2.43 3.7.01.13a.2.2 0 0 1-.2.21h-1.61a.33.33 0 0 1-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 0 1-.3.17zm-7.12-1.49A2.47 2.47 0 0 1 70.7 12a2.47 2.47 0 0 1 2.42-2.52 2.47 2.47 0 0 1 2.42 2.51 2.48 2.48 0 0 1-2.42 2.52zm-19.87 0a2.48 2.48 0 0 1-2.42-2.48v-.07a2.47 2.47 0 0 1 2.4-2.49 2.47 2.47 0 0 1 2.41 2.51 2.47 2.47 0 0 1-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51a2.47 2.47 0 0 1 2.4-2.52 2.46 2.46 0 0 1 2.41 2.48l.02.08zm18.12 2.47a2.47 2.47 0 0 1-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51a2.47 2.47 0 0 1-2.42 2.51z"/></defs><mask id="c"><rect width="100%" height="100%" fill="#fff"/><use xlink:href="#g"/><use xlink:href="#b"/></mask><g opacity=".3" stroke="#000" stroke-width="3"><circle mask="url(#c)" cx="11.5" cy="11.5" r="9.25"/><use xlink:href="#b" mask="url(#c)"/></g><g opacity=".9" fill="#fff"><use xlink:href="#g"/><use xlink:href="#b"/></g></svg>';var ys=16,cl=N(`
<template>
  <div class="MapboxAddressMinimap" aria-hidden="true">
    <div class="MinimapImageContainer">
      <img class="MinimapImage" draggable="false"></img>
      <div class="MinimapInnerFrame">
        <div class="MinimapMarker"></div>
        <div class="MinimapAttribution">
          <div class="MinimapAttributionLogo">
            <a target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo">
              ${bs}
            </a>
          </div>
          <div class="MinimapAttributionText">
            <a target="_blank" href='https://www.mapbox.com/about/maps/'>\xA9 Mapbox</a><a target="_blank" href='http://www.openstreetmap.org/copyright'>\xA9 OpenStreetMap</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
`),dl=N(`
<template>
  <button type="button" class="MinimapStyleToggle"></button>
</template>
`),ul=N(`
<template>
  <div class="MinimapFooter">Adjust the marker on the map if it doesn't precisely match your location. This helps improve address data quality.</div>
</template>
`),Hn="Adjust pin",_n="Save",Fn="Cancel",hl=N(`
<template>
  <div class="MinimapEditButtons">
    <div class="Button ButtonPrimary MinimapButtonAdjust">${Hn}</div>
    <div class="Button ButtonPrimary MinimapButtonSave" aria-hidden="true">${_n}</div>
    <div class="Button MinimapButtonCancel" aria-hidden="true">${Fn}</div>
  </div>
</template>
`),Or,Xe,ft,me,Ie,ne,oe,C,D,Pr,Br,Hr,ze,_r,Fr,Nr,Dr,jr,Ur,mt,$r,Gr,Yr,Wr,Gi,Yi,qr,gt,vt,Vr,Xr,Wi,zr,qi,bt=class extends q{constructor(){super(...arguments);d(this,Or,!1);this.keepMarkerCentered=!1;this.markerAnchor="bottom";d(this,Xe,!1);d(this,ft,!1);d(this,me,void 0);d(this,Ie,"");d(this,ne,void 0);d(this,oe,void 0);d(this,C,void 0);d(this,D,void 0);d(this,Pr,void 0);d(this,Br,{});d(this,Hr,!1);d(this,ze,"default");d(this,_r,void 0);d(this,Fr,void 0);d(this,Nr,void 0);d(this,Dr,["mapbox","streets-v11"]);d(this,jr,void 0);d(this,Ur,void 0);d(this,mt,()=>{let{ImageContainer:e,ButtonAdjust:r,ButtonSave:i,ButtonCancel:o}=n(this,C);n(this,Xe)?(e.classList.add(`${this.dataset.seed}--draggable`),n(this,D).isActive=!0,r.setAttribute("aria-hidden","true"),i.removeAttribute("aria-hidden"),o.removeAttribute("aria-hidden")):(e.classList.remove(`${this.dataset.seed}--draggable`),n(this,D).isActive=!1,r.removeAttribute("aria-hidden"),i.setAttribute("aria-hidden","true"),o.setAttribute("aria-hidden","true"))});d(this,$r,()=>{p(this,Xe,!0),n(this,mt).call(this)});d(this,Gr,()=>{if(this.feature.properties.full_address&&!_e(this.feature.geometry.coordinates,n(this,D).coordinate)){let[e,r]=n(this,D).coordinate;_i(this.accessToken,{originalCoordinate:this.feature.geometry.coordinates,originalAddress:this.feature.properties.full_address,changes:{location:{longitude:e,latitude:r}}})}this.onSaveMarkerLocation&&this.onSaveMarkerLocation(n(this,D).coordinate),p(this,Xe,!1),n(this,mt).call(this)});d(this,Yr,()=>{n(this,D).reCenter(),p(this,Xe,!1),n(this,mt).call(this)});d(this,Wr,()=>{this.mapStyleMode=this.mapStyleMode==="default"?"satellite":"default"});d(this,Gi,()=>{n(this,ft)||n(this,D).reCenter(),p(this,ft,!0),n(this,D)&&n(this,D).handleMinimapResize()});d(this,Yi,()=>{p(this,ft,!1)});d(this,qr,e=>{if(n(this,ne)===0||n(this,oe)===0)return"";let[r,i]=this.defaultMapStyle,o=mi(r,i),s=this.mapStyleMode==="default"?o:co,l=uo+I.autofillSessionToken.toString(),a=s+_.convert(e).toArray().join(",")+","+ys+",0/"+Math.min(n(this,ne)*2,Ve)+"x"+Math.min(n(this,oe)*2,Ve)+"?access_token="+this.accessToken+"&attribution=false&logo=false";return I.autofillSessionEnabled&&(a+=`&sku=${l}`),a});d(this,gt,()=>{if(n(this,me)){let e=n(this,me).geometry.coordinates;p(this,Ie,n(this,qr).call(this,e));let{Image:r}=n(this,C);r.src=n(this,Ie)}});d(this,vt,e=>`url("${Ao(e==="default"?"styleToggleDefault":"styleToggleSatellite",this.theme)}")`);d(this,Vr,()=>{let{MapboxAddressMinimap:e,ImageContainer:r,Image:i}=n(this,C),{width:o,height:s}=ci(this.container),[l,a]=[n(this,ne),n(this,oe)];p(this,ne,Math.min(o,Ve)),p(this,oe,Math.min(s,Ve)),e.style.setProperty("width",`${n(this,ne)}px`),e.style.setProperty("height",`${n(this,oe)}px`),r.style.setProperty("height",`${n(this,oe)}px`),r.style.setProperty("width",`${n(this,ne)}px`);let[c,u]=[i.width,i.height];n(this,ne)>l&&n(this,ne)>c/2&&c<Ve||n(this,oe)>a&&n(this,oe)>u/2&&u<Ve?n(this,gt).call(this):n(this,D)&&n(this,D).handleMinimapResize()});d(this,Xr,()=>{if(this.querySelector(".MinimapFooter"))return;let r=this.prepareTemplate(ul),i=this.querySelector(".MapboxAddressMinimap");if(!i||(i.appendChild(r),this.querySelector(".MinimapEditButtons")))return;let s=this.prepareTemplate(hl);this.querySelector(".MinimapInnerFrame").appendChild(s),p(this,C,G(x({},n(this,C)),{EditButtons:this.querySelector(".MinimapEditButtons"),ButtonAdjust:this.querySelector(".MinimapButtonAdjust"),ButtonSave:this.querySelector(".MinimapButtonSave"),ButtonCancel:this.querySelector(".MinimapButtonCancel")}));let{ButtonAdjust:a,ButtonSave:c,ButtonCancel:u}=n(this,C);a.addEventListener("click",n(this,$r)),c.addEventListener("click",n(this,Gr)),u.addEventListener("click",n(this,Yr))});d(this,Wi,()=>{if(!n(this,C))return;let{EditButtons:e,ButtonAdjust:r,ButtonSave:i,ButtonCancel:o}=n(this,C),s=this.querySelector(".MinimapFooter");s==null||s.remove(),e==null||e.remove(),r&&(r.remove(),r.removeEventListener("click",n(this,$r))),i&&(i.remove(),i.removeEventListener("click",n(this,Gr))),o&&(o.remove(),o.removeEventListener("click",n(this,Yr))),delete n(this,C).EditButtons,delete n(this,C).ButtonAdjust,delete n(this,C).ButtonSave,delete n(this,C).ButtonCancel});d(this,zr,()=>{if(this.querySelector(".MinimapStyleToggle"))return;let r=this.prepareTemplate(dl),i=this.querySelector(".MinimapInnerFrame");!i||(i.appendChild(r),n(this,C).MapStyleToggle=r,r.addEventListener("click",n(this,Wr)),r.style.backgroundImage=n(this,vt).call(this,this.mapStyleMode==="default"?"satellite":"default"),r.setAttribute("title",`Switch to ${this.mapStyleMode==="default"?"Satellite":"Default"}`))});d(this,qi,()=>{if(!n(this,C))return;let{MapStyleToggle:e}=n(this,C);!e||(e.remove(),e.removeEventListener("click",n(this,Wr)),delete n(this,C).MapStyleToggle)})}get canAdjustMarker(){return n(this,Or)}set canAdjustMarker(e){p(this,Or,e),e?n(this,Xr).call(this):n(this,Wi).call(this)}get accessToken(){return n(this,Pr)||I.accessToken}set accessToken(e){p(this,Pr,e)}get feature(){return n(this,me)}set feature(e){p(this,me,e),e?this.show():this.hide()}get template(){return cl}get templateStyle(){return ee}get templateUserStyle(){return U(".MapboxAddressMinimap",this.theme)}get satelliteToggle(){return n(this,Hr)}set satelliteToggle(e){p(this,Hr,e),e?n(this,zr).call(this):n(this,qi).call(this)}get theme(){return n(this,Br)}set theme(e){if(p(this,Br,e),!n(this,C)||!e)return;this.updateTemplateUserStyle(U(".MapboxAddressMinimap",e));let{Marker:r,MapStyleToggle:i}=n(this,C);r.innerHTML=X("marker",e),i&&(i.style.backgroundImage=n(this,vt).call(this,this.mapStyleMode==="default"?"satellite":"default"))}get adjustBtnText(){return n(this,_r)||Hn}set adjustBtnText(e){p(this,_r,e);let r=this.querySelector(".MinimapButtonAdjust");r.textContent=e||Hn}get saveBtnText(){return n(this,Fr)||_n}set saveBtnText(e){p(this,Fr,e);let r=this.querySelector(".MinimapButtonSave");r.textContent=e||_n}get cancelBtnText(){return n(this,Nr)||Fn}set cancelBtnText(e){p(this,Nr,e);let r=this.querySelector(".MinimapButtonCancel");r.textContent=e||Fn}get mapStyleMode(){return n(this,ze)}set mapStyleMode(e){let r=n(this,ze);if(r===e||(p(this,ze,e),!n(this,C)))return;let{MapStyleToggle:i}=n(this,C);!i||(i.style.backgroundImage=n(this,vt).call(this,r),i.setAttribute("title",`Switch to ${r==="satellite"?"Satellite":"Default"}`),n(this,gt).call(this))}get defaultMapStyle(){return n(this,Dr)}set defaultMapStyle(e){p(this,Dr,e),n(this,gt).call(this)}get footer(){return n(this,jr)}set footer(e){p(this,jr,e);let r=this.querySelector(".MinimapFooter");r&&(typeof e=="string"?(r.textContent=e,r.removeAttribute("aria-hidden")):e?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden","true"))}get container(){return n(this,Ur)}set container(e){e&&(e.style.position="relative",p(this,Ur,e))}show(){if(!n(this,me))return;let e=n(this,me).geometry.coordinates;n(this,D).coordinate=e,p(this,Ie,n(this,qr).call(this,e));let{MapboxAddressMinimap:r,Image:i}=n(this,C);i.src=n(this,Ie),r.removeAttribute("aria-hidden")}hide(){let{MapboxAddressMinimap:e}=n(this,C);e.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),p(this,C,se(this,{MapboxAddressMinimap:".MapboxAddressMinimap",ImageContainer:".MinimapImageContainer",Image:".MinimapImage",Marker:".MinimapMarker",MapStyleToggle:".MinimapStyleToggle",EditButtons:".MinimapEditButtons",ButtonAdjust:".MinimapButtonAdjust",ButtonSave:".MinimapButtonSave",ButtonCancel:".MinimapButtonCancel"})),this.mapStyleMode=n(this,ze),this.theme=x({},this.theme),this.canAdjustMarker&&n(this,Xr).call(this),this.satelliteToggle&&n(this,zr).call(this),this.container=this.parentElement,new ResizeObserver(n(this,Vr)).observe(this.container),n(this,Vr).call(this);let{MapboxAddressMinimap:r,ImageContainer:i,Image:o,Marker:s}=n(this,C);p(this,D,new Bn(i,o,s,this.keepMarkerCentered,ys,this.markerAnchor)),n(this,D).reCenter(),o.onload=n(this,Gi),o.onerror=n(this,Yi),o.src=n(this,Ie),n(this,me)?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden","true")}attributeChangedCallback(e,r,i){if(e==="access-token")this.accessToken=i;else if(e==="can-adjust-marker")this.canAdjustMarker=i==="true";else if(e==="keep-marker-centered")this.keepMarkerCentered=i==="true";else if(e==="marker-anchor"){let o=i;this.markerAnchor=o,n(this,D)&&(n(this,D).anchor=o)}else e==="satellite-toggle"&&(this.satelliteToggle=i==="true")}};Or=new WeakMap,Xe=new WeakMap,ft=new WeakMap,me=new WeakMap,Ie=new WeakMap,ne=new WeakMap,oe=new WeakMap,C=new WeakMap,D=new WeakMap,Pr=new WeakMap,Br=new WeakMap,Hr=new WeakMap,ze=new WeakMap,_r=new WeakMap,Fr=new WeakMap,Nr=new WeakMap,Dr=new WeakMap,jr=new WeakMap,Ur=new WeakMap,mt=new WeakMap,$r=new WeakMap,Gr=new WeakMap,Yr=new WeakMap,Wr=new WeakMap,Gi=new WeakMap,Yi=new WeakMap,qr=new WeakMap,gt=new WeakMap,vt=new WeakMap,Vr=new WeakMap,Xr=new WeakMap,Wi=new WeakMap,zr=new WeakMap,qi=new WeakMap,bt.observedAttributes=["access-token","can-adjust-marker","keep-marker-centered","marker-anchor","satellite-toggle"];window.MapboxAddressMinimap=bt;window.customElements.get("mapbox-address-minimap")||customElements.define("mapbox-address-minimap",bt);var $,Me,z,Se,Kr,Qr,Zr,Jr,ei,ti,yt,xs=class{constructor(e,r,i){d(this,$,void 0);d(this,Me,void 0);d(this,z,void 0);this.options={};this.retrieveFeature=null;this.listbox=new xe;d(this,Se,void 0);d(this,Kr,e=>{let r=e.detail,i=n(this,Me).browserAutofillEnabled===!0&&(r==null?void 0:r.length)<=2;if(te(n(this,$),n(this,Se),i),(r==null?void 0:r.length)<=2){this.listbox.handleSuggest(null);return}n(this,z).suggest(r,this.options)});d(this,Qr,e=>{let r=e.detail;e.detail.accuracy!=="street"?(te(n(this,$),n(this,Se),!0),n(this,z).retrieve(r,this.options)):ki(n(this,$),n(this,Se),r)});d(this,Zr,()=>{te(n(this,$),n(this,Se),!0),n(this,z).abort()});d(this,Jr,()=>{var r;let e=n(this,Me).browserAutofillEnabled===!0&&((r=n(this,$).value)==null?void 0:r.length)<=2;te(n(this,$),n(this,Se),e)});d(this,ei,e=>{let r=(e==null?void 0:e.suggestions)?Ci(e.suggestions):null;this.listbox.handleSuggest(r);let i=new S("suggest",e);Object.defineProperty(i,"target",{value:n(this,$)}),n(this,Me).fire("suggest",i)});d(this,ti,e=>{this.listbox.handleError();let r=new S("suggesterror",e);Object.defineProperty(r,"target",{value:n(this,$)}),n(this,Me).fire("suggesterror",r)});d(this,yt,e=>{var o;let r=new S("retrieve",e);if(Object.defineProperty(r,"target",{value:n(this,$)}),n(this,Me).fire("retrieve",r),this.retrieveFeature=(o=e.features)==null?void 0:o[0],!n(this,$))return;let i=e;!i||!i.features||!i.features.length||Wt(i.features[0],n(this,$))});p(this,$,r),p(this,Me,e),p(this,z,new Ze(i)),n(this,z).sessionToken=I.autofillSessionToken,this.listbox.input=n(this,$),this.listbox.autofillHost=this,this.listbox.searchService=0,this.listbox.addEventListener("input",n(this,Kr)),this.listbox.addEventListener("select",n(this,Qr)),this.listbox.addEventListener("blur",n(this,Zr)),this.listbox.addEventListener("focus",n(this,Jr)),n(this,z).addEventListener("suggest",n(this,ei)),n(this,z).addEventListener("suggesterror",n(this,ti)),n(this,z).addEventListener("retrieve",n(this,yt)),document.body.appendChild(this.listbox),r&&(r.insertAdjacentElement("beforebegin",rt()),Ti(r),p(this,Se,r.autocomplete))}get input(){return n(this,$)}remove(){this.listbox.remove(),this.listbox.removeEventListener("input",n(this,Kr)),this.listbox.removeEventListener("select",n(this,Qr)),this.listbox.removeEventListener("blur",n(this,Zr)),this.listbox.removeEventListener("focus",n(this,Jr)),n(this,z).removeEventListener("suggest",n(this,ei)),n(this,z).removeEventListener("suggesterror",n(this,ti)),n(this,z).removeEventListener("retrieve",n(this,yt))}simulateRetrieve(e){let r=n(this,$);r&&(r.dataset.mapboxSuccess="true"),this.listbox.hideResults();let i={type:"FeatureCollection",features:[e],url:""};n(this,yt).call(this,i)}};$=new WeakMap,Me=new WeakMap,z=new WeakMap,Se=new WeakMap,Kr=new WeakMap,Qr=new WeakMap,Zr=new WeakMap,Jr=new WeakMap,ei=new WeakMap,ti=new WeakMap,yt=new WeakMap;var xt,Et,At,ri,ii,ni,oi,si,Es=class extends ln{constructor({accessToken:e,options:r,theme:i,popoverOptions:o,confirmOnBrowserAutofill:s,browserAutofillEnabled:l}){super();this.instances=[];d(this,xt,void 0);d(this,Et,new kt);d(this,At,void 0);d(this,ri,void 0);d(this,ii,void 0);this.confirmOnBrowserAutofill=!1;this.browserAutofillEnabled=!1;d(this,ni,()=>{_e($t(),n(this,xt))||this.update()});d(this,oi,new MutationObserver(n(this,ni)));d(this,si,e=>F(this,null,function*(){this.instances.forEach(r=>r.listbox.blur());for(let r of this.instances){let i=r.listbox.input;yield Hi(i,e,this.confirmOnBrowserAutofill,this.accessToken)}}));Ni(),window.addEventListener("browserautofill",n(this,si)),I.autofillSessionEnabled=!0,this.accessToken=e||I.accessToken,r&&(this.options=r),i&&(this.theme=i),o&&(this.popoverOptions=o),s&&(this.confirmOnBrowserAutofill=s),l&&(this.browserAutofillEnabled=l),this.update()}get accessToken(){return n(this,Et).accessToken}set accessToken(e){n(this,Et).accessToken=e}get options(){return n(this,At)}set options(e){p(this,At,x(x({},n(this,At)),e)),this.instances.forEach(r=>{r.options=x(x({},r.options),e)})}get theme(){return n(this,ri)}set theme(e){p(this,ri,e),this.instances.forEach(r=>{r.listbox.theme=e})}get popoverOptions(){return n(this,ii)}set popoverOptions(e){p(this,ii,e),this.instances.forEach(r=>{r.listbox.popoverOptions=e})}update(){this.instances.forEach(e=>{e.remove()}),p(this,xt,$t()),this.instances=[],n(this,xt).forEach(e=>{let r=new xs(this,e,n(this,Et));r.options=this.options,r.listbox.theme=this.theme,r.listbox.popoverOptions=this.popoverOptions,this.instances.push(r)})}observe(){n(this,oi).observe(document,{subtree:!0,childList:!0}),n(this,ni).call(this)}unobserve(){n(this,oi).disconnect()}remove(){this.instances.forEach(e=>{e.remove()}),this.unobserve(),window.removeEventListener("browserautofill",n(this,si))}};xt=new WeakMap,Et=new WeakMap,At=new WeakMap,ri=new WeakMap,ii=new WeakMap,ni=new WeakMap,oi=new WeakMap,si=new WeakMap;function As(t){return new Es(t)}return Is(pl);})();
/*!
* focus-trap 6.7.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
/*!
* tabbable 5.2.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
//# sourceMappingURL=mapboxsearch.js.map
